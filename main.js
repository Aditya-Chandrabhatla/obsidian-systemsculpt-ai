var uc=Object.create,De=Object.defineProperty,fc=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty,pc=Object.getOwnPropertyNames,hc=Object.getOwnPropertyDescriptor;var co=t=>De(t,"__esModule",{value:!0});var _t=(t,e)=>()=>(e||(e={exports:{}},t(e.exports,e)),e.exports),uo=(t,e)=>{for(var r in e)De(t,r,{get:e[r],enumerable:!0})},mc=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of pc(e))!dc.call(t,n)&&n!=="default"&&De(t,n,{get:()=>e[n],enumerable:!(r=hc(e,n))||r.enumerable});return t},T=t=>mc(co(De(t!=null?uc(fc(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var da=_t((Xb,fa)=>{fa.exports=typeof self=="object"?self.FormData:window.FormData});var Ra=_t(ka=>{"use strict";var Nd=require("url").parse,Pd={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},Dd=String.prototype.endsWith||function(t){return t.length<=this.length&&this.indexOf(t,this.length-t.length)!==-1};function Fd(t){var e=typeof t=="string"?Nd(t):t||{},r=e.protocol,n=e.host,o=e.port;if(typeof n!="string"||!n||typeof r!="string"||(r=r.split(":",1)[0],n=n.replace(/:\d*$/,""),o=parseInt(o)||Pd[r]||0,!jd(n,o)))return"";var i=Yt("npm_config_"+r+"_proxy")||Yt(r+"_proxy")||Yt("npm_config_proxy")||Yt("all_proxy");return i&&i.indexOf("://")===-1&&(i=r+"://"+i),i}function jd(t,e){var r=(Yt("npm_config_no_proxy")||Yt("no_proxy")).toLowerCase();return r?r==="*"?!1:r.split(/[,\s]/).every(function(n){if(!n)return!0;var o=n.match(/^(.+):(\d+)$/),i=o?o[1]:n,s=o?parseInt(o[2]):0;return s&&s!==e?!0:/^[.*]/.test(i)?(i.charAt(0)==="*"&&(i=i.slice(1)),!Dd.call(t,i)):t!==i}):!0}function Yt(t){return process.env[t.toLowerCase()]||process.env[t.toUpperCase()]||""}ka.getProxyForUrl=Fd});var Na=_t((Yv,Ma)=>{var Jt=1e3,Zt=Jt*60,Qt=Zt*60,Dt=Qt*24,Id=Dt*7,Ld=Dt*365.25;Ma.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Od(t);if(r==="number"&&isFinite(t))return e.long?Hd(t):Bd(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Od(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Ld;case"weeks":case"week":case"w":return r*Id;case"days":case"day":case"d":return r*Dt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Zt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Jt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Bd(t){var e=Math.abs(t);return e>=Dt?Math.round(t/Dt)+"d":e>=Qt?Math.round(t/Qt)+"h":e>=Zt?Math.round(t/Zt)+"m":e>=Jt?Math.round(t/Jt)+"s":t+"ms"}function Hd(t){var e=Math.abs(t);return e>=Dt?Er(t,e,Dt,"day"):e>=Qt?Er(t,e,Qt,"hour"):e>=Zt?Er(t,e,Zt,"minute"):e>=Jt?Er(t,e,Jt,"second"):t+" ms"}function Er(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var Da=_t((Jv,Pa)=>{function Ud(t){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=o,r.enabled=s,r.humanize=Na(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let p=0;p<u.length;p++)f=(f<<5)-f+u.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,p=null,y,h;function m(...g){if(!m.enabled)return;let w=m,S=Number(new Date),b=S-(f||S);w.diff=b,w.prev=f,w.curr=S,f=S,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let C=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(X,st)=>{if(X==="%%")return"%";C++;let tt=r.formatters[st];if(typeof tt=="function"){let ut=g[C];X=tt.call(w,ut),g.splice(C,1),C--}return X}),r.formatArgs.call(w,g),(w.log||r.log).apply(w,g)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,h=r.enabled(u)),h),set:g=>{p=g}}),typeof r.init=="function"&&r.init(m),m}function n(u,f){let p=r(this.namespace+(typeof f=="undefined"?":":f)+u);return p.log=this.log,p}function o(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f,p=(typeof u=="string"?u:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)!p[f]||(u=p[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(u))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Pa.exports=Ud});var ja=_t((W,_r)=>{W.formatArgs=zd;W.save=qd;W.load=$d;W.useColors=Kd;W.storage=Vd();W.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();W.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Kd(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function zd(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+_r.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}W.log=console.debug||console.log||(()=>{});function qd(t){try{t?W.storage.setItem("debug",t):W.storage.removeItem("debug")}catch(e){}}function $d(){let t;try{t=W.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Vd(){try{return localStorage}catch(t){}}_r.exports=Da()(W);var{formatters:Gd}=_r.exports;Gd.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ia=_t((Zv,Fa)=>{var _e;Fa.exports=function(){if(!_e){try{_e=ja()("follow-redirects")}catch(t){}typeof _e!="function"&&(_e=function(){})}_e.apply(null,arguments)}});var Ua=_t((Qv,Pn)=>{var Se=require("url"),Te=Se.URL,Wd=require("http"),Xd=require("https"),Dn=require("stream").Writable,jn=require("assert"),La=Ia(),Fn=!1;try{jn(new Te)}catch(t){Fn=t.code==="ERR_INVALID_URL"}var Yd=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],In=["abort","aborted","connect","error","socket","timeout"],Ln=Object.create(null);In.forEach(function(t){Ln[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var On=Ae("ERR_INVALID_URL","Invalid URL",TypeError),Bn=Ae("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Jd=Ae("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",Bn),Zd=Ae("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Qd=Ae("ERR_STREAM_WRITE_AFTER_END","write after end"),tp=Dn.prototype.destroy||Oa;function V(t,e){Dn.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){try{r._processResponse(n)}catch(o){r.emit("error",o instanceof Bn?o:new Bn({cause:o}))}},this._performRequest()}V.prototype=Object.create(Dn.prototype);V.prototype.abort=function(){Hn(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};V.prototype.destroy=function(t){return Hn(this._currentRequest,t),tp.call(this,t),this};V.prototype.write=function(t,e,r){if(this._ending)throw new Qd;if(!jt(t)&&!ep(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(Ce(e)&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Zd),this.abort())};V.prototype.end=function(t,e,r){if(Ce(t)?(r=t,t=e=null):Ce(e)&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,o=this._currentRequest;this.write(t,e,function(){n._ended=!0,o.end(null,null,r)}),this._ending=!0}};V.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};V.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};V.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},t),n(s)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),r.removeListener("close",i),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){V.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(V.prototype,t,{get:function(){return this._currentRequest[t]}})});V.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};V.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var o of In)n.on(o,Ln[o]);if(this._currentUrl=/^\//.test(this._options.path)?Se.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};V.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(Hn(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new Jd;var n,o=this._options.beforeRedirect;o&&(n=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var i=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],qn(/^content-/i,this._options.headers));var s=qn(/^host$/i,this._options.headers),a=Un(this._currentUrl),c=s||a.host,l=/^\w+:/.test(r)?this._currentUrl:Se.format(Object.assign(a,{host:c})),u=rp(r,l);if(La("redirecting to",u.href),this._isRedirect=!0,zn(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!np(u.host,c))&&qn(/^(?:authorization|cookie)$/i,this._options.headers),Ce(o)){var f={headers:t.headers,statusCode:e},p={url:l,method:i,headers:n};o(this._options,f,p),this._sanitizeOptions(this._options)}this._performRequest()};function Ha(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var o=n+":",i=r[o]=t[n],s=e[n]=Object.create(i);function a(l,u,f){return op(l)?l=zn(l):jt(l)?l=zn(Un(l)):(f=u,u=Ba(l),l={protocol:o}),Ce(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,!jt(u.host)&&!jt(u.hostname)&&(u.hostname="::1"),jn.equal(u.protocol,o,"protocol mismatch"),La("options",u),new V(u,f)}function c(l,u,f){var p=s.request(l,u,f);return p.end(),p}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function Oa(){}function Un(t){var e;if(Fn)e=new Te(t);else if(e=Ba(Se.parse(t)),!jt(e.protocol))throw new On({input:t});return e}function rp(t,e){return Fn?new Te(t,e):Un(Se.resolve(e,t))}function Ba(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new On({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new On({input:t.href||t});return t}function zn(t,e){var r=e||{};for(var n of Yd)r[n]=t[n];return r.hostname.startsWith("[")&&(r.hostname=r.hostname.slice(1,-1)),r.port!==""&&(r.port=Number(r.port)),r.path=r.search?r.pathname+r.search:r.pathname,r}function qn(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function Ae(t,e,r){function n(o){Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(r||Error),Object.defineProperties(n.prototype,{constructor:{value:n,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),n}function Hn(t,e){for(var r of In)t.removeListener(r,Ln[r]);t.on("error",Oa),t.destroy(e)}function np(t,e){jn(jt(t)&&jt(e));var r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}function jt(t){return typeof t=="string"||t instanceof String}function Ce(t){return typeof t=="function"}function ep(t){return typeof t=="object"&&"length"in t}function op(t){return Te&&t instanceof Te}Pn.exports=Ha({http:Wd,https:Xd});Pn.exports.wrap=Ha});co(exports);uo(exports,{default:()=>Pp});var Dr=T(require("obsidian"));var zs=T(require("obsidian"));function St(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ir(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function je(t){let e,r,n;t.length!==2?(e=St,r=(a,c)=>St(t(a),c),n=(a,c)=>t(a)-c):(e=t===St||t===Ir?t:gc,r=t,n=t);function o(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{let f=l+u>>>1;r(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{let f=l+u>>>1;r(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){let f=o(a,c,l,u-1);return f>l&&n(a[f-1],c)>-n(a[f],c)?f-1:f}return{left:o,center:s,right:i}}function gc(){return 0}function Lr(t){return t===null?NaN:+t}var fo=je(St),yc=fo.right,$p=fo.left,Kp=je(Lr).center,po=yc;var xc=Math.sqrt(50),wc=Math.sqrt(10),bc=Math.sqrt(2);function Fe(t,e,r){let n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),i=n/Math.pow(10,o),s=i>=xc?10:i>=wc?5:i>=bc?2:1,a,c,l;return o<0?(l=Math.pow(10,-o)/s,a=Math.round(t*l),c=Math.round(e*l),a/l<t&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,o)*s,a=Math.round(t/l),c=Math.round(e/l),a*l<t&&++a,c*l>e&&--c),c<a&&.5<=r&&r<2?Fe(t,e,r*2):[a,c,l]}function Or(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[o,i,s]=n?Fe(e,t,r):Fe(t,e,r);if(!(i>=o))return[];let a=i-o+1,c=new Array(a);if(n)if(s<0)for(let l=0;l<a;++l)c[l]=(i-l)/-s;else for(let l=0;l<a;++l)c[l]=(i-l)*s;else if(s<0)for(let l=0;l<a;++l)c[l]=(o+l)/-s;else for(let l=0;l<a;++l)c[l]=(o+l)*s;return c}function Ie(t,e,r){return e=+e,t=+t,r=+r,Fe(t,e,r)[2]}function ho(t,e,r){e=+e,t=+t,r=+r;let n=e<t,o=n?Ie(e,t,r):Ie(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}var vc={value:()=>{}};function mo(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Le(r)}function Le(t){this._=t}function Ec(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Le.prototype=mo.prototype={constructor:Le,on:function(t,e){var r=this._,n=Ec(t+"",r),o,i=-1,s=n.length;if(arguments.length<2){for(;++i<s;)if((o=(t=n[i]).type)&&(o=_c(r[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(o=(t=n[i]).type)r[o]=go(r[o],t.name,e);else if(e==null)for(o in r)r[o]=go(r[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Le(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,i;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],n=0,o=i.length;n<o;++n)i[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};function _c(t,e){for(var r=0,n=t.length,o;r<n;++r)if((o=t[r]).name===e)return o.value}function go(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=vc,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var yo=mo;var Oe="http://www.w3.org/1999/xhtml",Br={svg:"http://www.w3.org/2000/svg",xhtml:Oe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Br.hasOwnProperty(e)?{space:Br[e],local:t}:t}function Sc(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Oe&&e.documentElement.namespaceURI===Oe?e.createElement(t):e.createElementNS(r,t)}}function Tc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Be(t){var e=pt(t);return(e.local?Tc:Sc)(e)}function Ac(){}function Ot(t){return t==null?Ac:function(){return this.querySelector(t)}}function xo(t){typeof t!="function"&&(t=Ot(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],s=i.length,a=n[o]=new Array(s),c,l,u=0;u<s;++u)(c=i[u])&&(l=t.call(c,c.__data__,u,i))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new R(n,this._parents)}function Hr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Cc(){return[]}function He(t){return t==null?Cc:function(){return this.querySelectorAll(t)}}function kc(t){return function(){return Hr(t.apply(this,arguments))}}function wo(t){typeof t=="function"?t=kc(t):t=He(t);for(var e=this._groups,r=e.length,n=[],o=[],i=0;i<r;++i)for(var s=e[i],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(n.push(t.call(c,c.__data__,l,s)),o.push(c));return new R(n,o)}function Ue(t){return function(){return this.matches(t)}}function ze(t){return function(e){return e.matches(t)}}var Rc=Array.prototype.find;function Mc(t){return function(){return Rc.call(this.children,t)}}function Nc(){return this.firstElementChild}function bo(t){return this.select(t==null?Nc:Mc(typeof t=="function"?t:ze(t)))}var Pc=Array.prototype.filter;function Dc(){return Array.from(this.children)}function jc(t){return function(){return Pc.call(this.children,t)}}function vo(t){return this.selectAll(t==null?Dc:jc(typeof t=="function"?t:ze(t)))}function Eo(t){typeof t!="function"&&(t=Ue(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],s=i.length,a=n[o]=[],c,l=0;l<s;++l)(c=i[l])&&t.call(c,c.__data__,l,i)&&a.push(c);return new R(n,this._parents)}function qe(t){return new Array(t.length)}function _o(){return new R(this._enter||this._groups.map(qe),this._parents)}function te(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}te.prototype={constructor:te,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function So(t){return function(){return t}}function Fc(t,e,r,n,o,i){for(var s=0,a,c=e.length,l=i.length;s<l;++s)(a=e[s])?(a.__data__=i[s],n[s]=a):r[s]=new te(t,i[s]);for(;s<c;++s)(a=e[s])&&(o[s]=a)}function Ic(t,e,r,n,o,i,s){var a,c,l=new Map,u=e.length,f=i.length,p=new Array(u),y;for(a=0;a<u;++a)(c=e[a])&&(p[a]=y=s.call(c,c.__data__,a,e)+"",l.has(y)?o[a]=c:l.set(y,c));for(a=0;a<f;++a)y=s.call(t,i[a],a,i)+"",(c=l.get(y))?(n[a]=c,c.__data__=i[a],l.delete(y)):r[a]=new te(t,i[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(p[a])===c&&(o[a]=c)}function Lc(t){return t.__data__}function To(t,e){if(!arguments.length)return Array.from(this,Lc);var r=e?Ic:Fc,n=this._parents,o=this._groups;typeof t!="function"&&(t=So(t));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),l=0;l<i;++l){var u=n[l],f=o[l],p=f.length,y=Oc(t.call(u,u&&u.__data__,l,n)),h=y.length,m=a[l]=new Array(h),g=s[l]=new Array(h),w=c[l]=new Array(p);r(u,f,m,g,w,y,e);for(var S=0,b=0,C,_;S<h;++S)if(C=m[S]){for(S>=b&&(b=S+1);!(_=g[b])&&++b<h;);C._next=_||null}}return s=new R(s,n),s._enter=a,s._exit=c,s}function Oc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ao(){return new R(this._exit||this._groups.map(qe),this._parents)}function Co(t,e,r){var n=this.enter(),o=this,i=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function ko(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,o=r.length,i=n.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var l=r[c],u=n[c],f=l.length,p=a[c]=new Array(f),y,h=0;h<f;++h)(y=l[h]||u[h])&&(p[h]=y);for(;c<o;++c)a[c]=r[c];return new R(a,this._parents)}function Ro(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],o=n.length-1,i=n[o],s;--o>=0;)(s=n[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Mo(t){t||(t=Bc);function e(f,p){return f&&p?t(f.__data__,p.__data__):!f-!p}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var s=r[i],a=s.length,c=o[i]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new R(o,this._parents).order()}function Bc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function No(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Po(){return Array.from(this)}function Do(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length;o<i;++o){var s=n[o];if(s)return s}return null}function jo(){let t=0;for(let e of this)++t;return t}function Fo(){return!this.node()}function Io(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var o=e[r],i=0,s=o.length,a;i<s;++i)(a=o[i])&&t.call(a,a.__data__,i,o);return this}function Hc(t){return function(){this.removeAttribute(t)}}function Uc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zc(t,e){return function(){this.setAttribute(t,e)}}function qc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $c(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Kc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Lo(t,e){var r=pt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?Uc:Hc:typeof e=="function"?r.local?Kc:$c:r.local?qc:zc)(r,e))}function $e(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Vc(t){return function(){this.style.removeProperty(t)}}function Gc(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Wc(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function Oo(t,e,r){return arguments.length>1?this.each((e==null?Vc:typeof e=="function"?Wc:Gc)(t,e,r??"")):Tt(this.node(),t)}function Tt(t,e){return t.style.getPropertyValue(e)||$e(t).getComputedStyle(t,null).getPropertyValue(e)}function Xc(t){return function(){delete this[t]}}function Yc(t,e){return function(){this[t]=e}}function Jc(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Bo(t,e){return arguments.length>1?this.each((e==null?Xc:typeof e=="function"?Jc:Yc)(t,e)):this.node()[t]}function Ho(t){return t.trim().split(/^|\s+/)}function Ur(t){return t.classList||new Uo(t)}function Uo(t){this._node=t,this._names=Ho(t.getAttribute("class")||"")}Uo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function zo(t,e){for(var r=Ur(t),n=-1,o=e.length;++n<o;)r.add(e[n])}function qo(t,e){for(var r=Ur(t),n=-1,o=e.length;++n<o;)r.remove(e[n])}function Zc(t){return function(){zo(this,t)}}function Qc(t){return function(){qo(this,t)}}function tu(t,e){return function(){(e.apply(this,arguments)?zo:qo)(this,t)}}function $o(t,e){var r=Ho(t+"");if(arguments.length<2){for(var n=Ur(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?tu:e?Zc:Qc)(r,e))}function eu(){this.textContent=""}function ru(t){return function(){this.textContent=t}}function nu(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ko(t){return arguments.length?this.each(t==null?eu:(typeof t=="function"?nu:ru)(t)):this.node().textContent}function ou(){this.innerHTML=""}function iu(t){return function(){this.innerHTML=t}}function su(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Vo(t){return arguments.length?this.each(t==null?ou:(typeof t=="function"?su:iu)(t)):this.node().innerHTML}function au(){this.nextSibling&&this.parentNode.appendChild(this)}function Go(){return this.each(au)}function lu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wo(){return this.each(lu)}function Xo(t){var e=typeof t=="function"?t:Be(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cu(){return null}function Yo(t,e){var r=typeof t=="function"?t:Be(t),n=e==null?cu:typeof e=="function"?e:Ot(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function uu(){var t=this.parentNode;t&&t.removeChild(this)}function Jo(){return this.each(uu)}function fu(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function du(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zo(t){return this.select(t?du:fu)}function Qo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function pu(t){return function(e){t.call(this,e,this.__data__)}}function hu(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function mu(t){return function(){var e=this.__on;if(!!e){for(var r=0,n=-1,o=e.length,i;r<o;++r)i=e[r],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++n]=i;++n?e.length=n:delete this.__on}}}function gu(t,e,r){return function(){var n=this.__on,o,i=pu(e);if(n){for(var s=0,a=n.length;s<a;++s)if((o=n[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=e;return}}this.addEventListener(t.type,i,r),o={type:t.type,name:t.name,value:e,listener:i,options:r},n?n.push(o):this.__on=[o]}}function ti(t,e,r){var n=hu(t+""),o,i=n.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(o=0,u=a[c];o<i;++o)if((s=n[o]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?gu:mu,o=0;o<i;++o)this.each(a(n[o],e,r));return this}function ei(t,e,r){var n=$e(t),o=n.CustomEvent;typeof o=="function"?o=new o(e,r):(o=n.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function yu(t,e){return function(){return ei(this,t,e)}}function xu(t,e){return function(){return ei(this,t,e.apply(this,arguments))}}function ri(t,e){return this.each((typeof e=="function"?xu:yu)(t,e))}function*ni(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length,s;o<i;++o)(s=n[o])&&(yield s)}var zr=[null];function R(t,e){this._groups=t,this._parents=e}function oi(){return new R([[document.documentElement]],zr)}function wu(){return this}R.prototype=oi.prototype={constructor:R,select:xo,selectAll:wo,selectChild:bo,selectChildren:vo,filter:Eo,data:To,enter:_o,exit:Ao,join:Co,merge:ko,selection:wu,order:Ro,sort:Mo,call:No,nodes:Po,node:Do,size:jo,empty:Fo,each:Io,attr:Lo,style:Oo,property:Bo,classed:$o,text:Ko,html:Vo,raise:Go,lower:Wo,append:Xo,insert:Yo,remove:Jo,clone:Zo,datum:Qo,on:ti,dispatch:ri,[Symbol.iterator]:ni};var ht=oi;function ii(t){return typeof t=="string"?new R([[document.querySelector(t)]],[document.documentElement]):new R([[t]],zr)}function Ke(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function qr(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ee(){}var re=.7,Ve=1/re,Bt="\\s*([+-]?\\d+)\\s*",ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bu=/^#([0-9a-f]{3,8})$/,vu=new RegExp(`^rgb\\(${Bt},${Bt},${Bt}\\)$`),Eu=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),_u=new RegExp(`^rgba\\(${Bt},${Bt},${Bt},${ne}\\)$`),Su=new RegExp(`^rgba\\(${rt},${rt},${rt},${ne}\\)$`),Tu=new RegExp(`^hsl\\(${ne},${rt},${rt}\\)$`),Au=new RegExp(`^hsla\\(${ne},${rt},${rt},${ne}\\)$`),si={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ke(ee,nt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ai,formatHex:ai,formatHex8:Cu,formatHsl:ku,formatRgb:li,toString:li});function ai(){return this.rgb().formatHex()}function Cu(){return this.rgb().formatHex8()}function ku(){return ci(this).formatHsl()}function li(){return this.rgb().formatRgb()}function nt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=bu.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?ui(e):r===3?new K(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Ge(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Ge(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vu.exec(t))?new K(e[1],e[2],e[3],1):(e=Eu.exec(t))?new K(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_u.exec(t))?Ge(e[1],e[2],e[3],e[4]):(e=Su.exec(t))?Ge(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Tu.exec(t))?fi(e[1],e[2]/100,e[3]/100,1):(e=Au.exec(t))?fi(e[1],e[2]/100,e[3]/100,e[4]):si.hasOwnProperty(t)?ui(si[t]):t==="transparent"?new K(NaN,NaN,NaN,0):null}function ui(t){return new K(t>>16&255,t>>8&255,t&255,1)}function Ge(t,e,r,n){return n<=0&&(t=e=r=NaN),new K(t,e,r,n)}function Ru(t){return t instanceof ee||(t=nt(t)),t?(t=t.rgb(),new K(t.r,t.g,t.b,t.opacity)):new K}function oe(t,e,r,n){return arguments.length===1?Ru(t):new K(t,e,r,n??1)}function K(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Ke(K,oe,qr(ee,{brighter(t){return t=t==null?Ve:Math.pow(Ve,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?re:Math.pow(re,t),new K(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new K(At(this.r),At(this.g),At(this.b),We(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:di,formatHex:di,formatHex8:Mu,formatRgb:pi,toString:pi}));function di(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function Mu(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function pi(){let t=We(this.opacity);return`${t===1?"rgb(":"rgba("}${At(this.r)}, ${At(this.g)}, ${At(this.b)}${t===1?")":`, ${t})`}`}function We(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function At(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ct(t){return t=At(t),(t<16?"0":"")+t.toString(16)}function fi(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Z(t,e,r,n)}function ci(t){if(t instanceof Z)return new Z(t.h,t.s,t.l,t.opacity);if(t instanceof ee||(t=nt(t)),!t)return new Z;if(t instanceof Z)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,o=Math.min(e,r,n),i=Math.max(e,r,n),s=NaN,a=i-o,c=(i+o)/2;return a?(e===i?s=(r-n)/a+(r<n)*6:r===i?s=(n-e)/a+2:s=(e-r)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new Z(s,a,c,t.opacity)}function Nu(t,e,r,n){return arguments.length===1?ci(t):new Z(t,e,r,n??1)}function Z(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Ke(Z,Nu,qr(ee,{brighter(t){return t=t==null?Ve:Math.pow(Ve,t),new Z(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?re:Math.pow(re,t),new Z(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new K($r(t>=240?t-240:t+120,o,n),$r(t,o,n),$r(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new Z(hi(this.h),Xe(this.s),Xe(this.l),We(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=We(this.opacity);return`${t===1?"hsl(":"hsla("}${hi(this.h)}, ${Xe(this.s)*100}%, ${Xe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hi(t){return t=(t||0)%360,t<0?t+360:t}function Xe(t){return Math.max(0,Math.min(1,t||0))}function $r(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function Kr(t,e,r,n,o){var i=t*t,s=i*t;return((1-3*t+3*i-s)*e+(4-6*i+3*s)*r+(1+3*t+3*i-3*s)*n+s*o)/6}function mi(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[n],i=t[n+1],s=n>0?t[n-1]:2*o-i,a=n<e-1?t[n+2]:2*i-o;return Kr((r-n/e)*e,s,o,i,a)}}function gi(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),o=t[(n+e-1)%e],i=t[n%e],s=t[(n+1)%e],a=t[(n+2)%e];return Kr((r-n/e)*e,o,i,s,a)}}var ie=t=>()=>t;function Pu(t,e){return function(r){return t+r*e}}function Du(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function yi(t){return(t=+t)==1?Ye:function(e,r){return r-e?Du(e,r,t):ie(isNaN(e)?r:e)}}function Ye(t,e){var r=e-t;return r?Pu(t,r):ie(isNaN(t)?e:t)}var Ht=function t(e){var r=yi(e);function n(o,i){var s=r((o=oe(o)).r,(i=oe(i)).r),a=r(o.g,i.g),c=r(o.b,i.b),l=Ye(o.opacity,i.opacity);return function(u){return o.r=s(u),o.g=a(u),o.b=c(u),o.opacity=l(u),o+""}}return n.gamma=t,n}(1);function xi(t){return function(e){var r=e.length,n=new Array(r),o=new Array(r),i=new Array(r),s,a;for(s=0;s<r;++s)a=oe(e[s]),n[s]=a.r||0,o[s]=a.g||0,i[s]=a.b||0;return n=t(n),o=t(o),i=t(i),a.opacity=1,function(c){return a.r=n(c),a.g=o(c),a.b=i(c),a+""}}}var lg=xi(mi),cg=xi(gi);function wi(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(i){for(o=0;o<r;++o)n[o]=t[o]*(1-i)+e[o]*i;return n}}function bi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vi(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)o[s]=Ut(t[s],e[s]);for(;s<r;++s)i[s]=e[s];return function(a){for(s=0;s<n;++s)i[s]=o[s](a);return i}}function Ei(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function B(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function _i(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=Ut(t[o],e[o]):n[o]=e[o];return function(i){for(o in r)n[o]=r[o](i);return n}}var Vr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gr=new RegExp(Vr.source,"g");function ju(t){return function(){return t}}function Fu(t){return function(e){return t(e)+""}}function Je(t,e){var r=Vr.lastIndex=Gr.lastIndex=0,n,o,i,s=-1,a=[],c=[];for(t=t+"",e=e+"";(n=Vr.exec(t))&&(o=Gr.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:B(n,o)})),r=Gr.lastIndex;return r<e.length&&(i=e.slice(r),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?Fu(c[0].x):ju(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function Ut(t,e){var r=typeof e,n;return e==null||r==="boolean"?ie(e):(r==="number"?B:r==="string"?(n=nt(e))?(e=n,Ht):Je:e instanceof nt?Ht:e instanceof Date?Ei:bi(e)?wi:Array.isArray(e)?vi:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_i:B)(t,e)}function Si(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var Ti=180/Math.PI,Ze={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wr(t,e,r,n,o,i){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*r+e*n)&&(r-=t*c,n-=e*c),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,c/=a),t*n<e*r&&(t=-t,e=-e,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*Ti,skewX:Math.atan(c)*Ti,scaleX:s,scaleY:a}}var Qe;function Ai(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ze:Wr(e.a,e.b,e.c,e.d,e.e,e.f)}function Ci(t){return t==null?Ze:(Qe||(Qe=document.createElementNS("http://www.w3.org/2000/svg","g")),Qe.setAttribute("transform",t),(t=Qe.transform.baseVal.consolidate())?(t=t.matrix,Wr(t.a,t.b,t.c,t.d,t.e,t.f)):Ze)}function ki(t,e,r,n){function o(l){return l.length?l.pop()+" ":""}function i(l,u,f,p,y,h){if(l!==f||u!==p){var m=y.push("translate(",null,e,null,r);h.push({i:m-4,x:B(l,f)},{i:m-2,x:B(u,p)})}else(f||p)&&y.push("translate("+f+e+p+r)}function s(l,u,f,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(o(f)+"rotate(",null,n)-2,x:B(l,u)})):u&&f.push(o(f)+"rotate("+u+n)}function a(l,u,f,p){l!==u?p.push({i:f.push(o(f)+"skewX(",null,n)-2,x:B(l,u)}):u&&f.push(o(f)+"skewX("+u+n)}function c(l,u,f,p,y,h){if(l!==f||u!==p){var m=y.push(o(y)+"scale(",null,",",null,")");h.push({i:m-4,x:B(l,f)},{i:m-2,x:B(u,p)})}else(f!==1||p!==1)&&y.push(o(y)+"scale("+f+","+p+")")}return function(l,u){var f=[],p=[];return l=t(l),u=t(u),i(l.translateX,l.translateY,u.translateX,u.translateY,f,p),s(l.rotate,u.rotate,f,p),a(l.skewX,u.skewX,f,p),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,p),l=u=null,function(y){for(var h=-1,m=p.length,g;++h<m;)f[(g=p[h]).i]=g.x(y);return f.join("")}}}var Ri=ki(Ai,"px, ","px)","deg)"),Mi=ki(Ci,", ",")",")");var zt=0,se=0,ae=0,Ni=1e3,tr,le,er=0,kt=0,rr=0,ce=typeof performance=="object"&&performance.now?performance:Date,Pi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nr(){return kt||(Pi(Iu),kt=ce.now()+rr)}function Iu(){kt=0}function ue(){this._call=this._time=this._next=null}ue.prototype=fe.prototype={constructor:ue,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?nr():+r)+(e==null?0:+e),!this._next&&le!==this&&(le?le._next=this:tr=this,le=this),this._call=t,this._time=r,Xr()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Xr())}};function fe(t,e,r){var n=new ue;return n.restart(t,e,r),n}function Lu(){nr(),++zt;for(var t=tr,e;t;)(e=kt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--zt}function Di(){kt=(er=ce.now())+rr,zt=se=0;try{Lu()}finally{zt=0,Ou(),kt=0}}function Bu(){var t=ce.now(),e=t-er;e>Ni&&(rr-=e,er=t)}function Ou(){for(var t,e=tr,r,n=Infinity;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:tr=r);le=t,Xr(n)}function Xr(t){if(!zt){se&&(se=clearTimeout(se));var e=t-kt;e>24?(t<Infinity&&(se=setTimeout(Di,t-ce.now()-rr)),ae&&(ae=clearInterval(ae))):(ae||(er=ce.now(),ae=setInterval(Bu,Ni)),zt=1,Pi(Di))}}function Yr(t,e,r){var n=new ue;return e=e==null?0:+e,n.restart(o=>{n.stop(),t(o+e)},e,r),n}var Hu=yo("start","end","cancel","interrupt"),Uu=[],ji=0,Fi=1,or=2,ir=3,Ii=4,sr=5,de=6;function mt(t,e,r,n,o,i){var s=t.__transition;if(!s)t.__transition={};else if(r in s)return;zu(t,r,{name:e,index:n,group:o,on:Hu,tween:Uu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ji})}function pe(t,e){var r=P(t,e);if(r.state>ji)throw new Error("too late; already scheduled");return r}function O(t,e){var r=P(t,e);if(r.state>ir)throw new Error("too late; already running");return r}function P(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function zu(t,e,r){var n=t.__transition,o;n[e]=r,r.timer=fe(i,0,r.time);function i(l){r.state=Fi,r.timer.restart(s,r.delay,r.time),r.delay<=l&&s(l-r.delay)}function s(l){var u,f,p,y;if(r.state!==Fi)return c();for(u in n)if(y=n[u],y.name===r.name){if(y.state===ir)return Yr(s);y.state===Ii?(y.state=de,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete n[u]):+u<e&&(y.state=de,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete n[u])}if(Yr(function(){r.state===ir&&(r.state=Ii,r.timer.restart(a,r.delay,r.time),a(l))}),r.state=or,r.on.call("start",t,t.__data__,r.index,r.group),r.state===or){for(r.state=ir,o=new Array(p=r.tween.length),u=0,f=-1;u<p;++u)(y=r.tween[u].value.call(t,t.__data__,r.index,r.group))&&(o[++f]=y);o.length=f+1}}function a(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(c),r.state=sr,1),f=-1,p=o.length;++f<p;)o[f].call(t,u);r.state===sr&&(r.on.call("end",t,t.__data__,r.index,r.group),c())}function c(){r.state=de,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function ar(t,e){var r=t.__transition,n,o,i=!0,s;if(!!r){e=e==null?null:e+"";for(s in r){if((n=r[s]).name!==e){i=!1;continue}o=n.state>or&&n.state<sr,n.state=de,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[s]}i&&delete t.__transition}}function Li(t){return this.each(function(){ar(this,t)})}function qu(t,e){var r,n;return function(){var o=O(this,t),i=o.tween;if(i!==r){n=r=i;for(var s=0,a=n.length;s<a;++s)if(n[s].name===e){n=n.slice(),n.splice(s,1);break}}o.tween=n}}function $u(t,e,r){var n,o;if(typeof r!="function")throw new Error;return function(){var i=O(this,t),s=i.tween;if(s!==n){o=(n=s).slice();for(var a={name:e,value:r},c=0,l=o.length;c<l;++c)if(o[c].name===e){o[c]=a;break}c===l&&o.push(a)}i.tween=o}}function Oi(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=P(this.node(),r).tween,o=0,i=n.length,s;o<i;++o)if((s=n[o]).name===t)return s.value;return null}return this.each((e==null?qu:$u)(r,t,e))}function qt(t,e,r){var n=t._id;return t.each(function(){var o=O(this,n);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return P(o,n).value[e]}}function lr(t,e){var r;return(typeof e=="number"?B:e instanceof nt?Ht:(r=nt(e))?(e=r,Ht):Je)(t,e)}function Ku(t){return function(){this.removeAttribute(t)}}function Vu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gu(t,e,r){var n,o=r+"",i;return function(){var s=this.getAttribute(t);return s===o?null:s===n?i:i=e(n=s,r)}}function Wu(t,e,r){var n,o=r+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===n?i:i=e(n=s,r)}}function Xu(t,e,r){var n,o,i;return function(){var s,a=r(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===n&&c===o?i:(o=c,i=e(n=s,a)))}}function Yu(t,e,r){var n,o,i;return function(){var s,a=r(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===n&&c===o?i:(o=c,i=e(n=s,a)))}}function Bi(t,e){var r=pt(t),n=r==="transform"?Mi:lr;return this.attrTween(t,typeof e=="function"?(r.local?Yu:Xu)(r,n,qt(this,"attr."+t,e)):e==null?(r.local?Vu:Ku)(r):(r.local?Wu:Gu)(r,n,e))}function Ju(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Zu(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Qu(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&Zu(t,i)),r}return o._value=e,o}function tf(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&Ju(t,i)),r}return o._value=e,o}function Hi(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=pt(t);return this.tween(r,(n.local?Qu:tf)(n,e))}function ef(t,e){return function(){pe(this,t).delay=+e.apply(this,arguments)}}function rf(t,e){return e=+e,function(){pe(this,t).delay=e}}function Ui(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ef:rf)(e,t)):P(this.node(),e).delay}function nf(t,e){return function(){O(this,t).duration=+e.apply(this,arguments)}}function of(t,e){return e=+e,function(){O(this,t).duration=e}}function zi(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nf:of)(e,t)):P(this.node(),e).duration}function sf(t,e){if(typeof e!="function")throw new Error;return function(){O(this,t).ease=e}}function qi(t){var e=this._id;return arguments.length?this.each(sf(e,t)):P(this.node(),e).ease}function af(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;O(this,t).ease=r}}function $i(t){if(typeof t!="function")throw new Error;return this.each(af(this._id,t))}function Ki(t){typeof t!="function"&&(t=Ue(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],s=i.length,a=n[o]=[],c,l=0;l<s;++l)(c=i[l])&&t.call(c,c.__data__,l,i)&&a.push(c);return new z(n,this._parents,this._name,this._id)}function Vi(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,o=r.length,i=Math.min(n,o),s=new Array(n),a=0;a<i;++a)for(var c=e[a],l=r[a],u=c.length,f=s[a]=new Array(u),p,y=0;y<u;++y)(p=c[y]||l[y])&&(f[y]=p);for(;a<n;++a)s[a]=e[a];return new z(s,this._parents,this._name,this._id)}function lf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function cf(t,e,r){var n,o,i=lf(e)?pe:O;return function(){var s=i(this,t),a=s.on;a!==n&&(o=(n=a).copy()).on(e,r),s.on=o}}function Gi(t,e){var r=this._id;return arguments.length<2?P(this.node(),r).on.on(t):this.each(cf(r,t,e))}function uf(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Wi(){return this.on("end.remove",uf(this._id))}function Xi(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ot(t));for(var n=this._groups,o=n.length,i=new Array(o),s=0;s<o;++s)for(var a=n[s],c=a.length,l=i[s]=new Array(c),u,f,p=0;p<c;++p)(u=a[p])&&(f=t.call(u,u.__data__,p,a))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f,mt(l[p],e,r,p,l,P(u,r)));return new z(i,this._parents,e,r)}function Yi(t){var e=this._name,r=this._id;typeof t!="function"&&(t=He(t));for(var n=this._groups,o=n.length,i=[],s=[],a=0;a<o;++a)for(var c=n[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var p=t.call(u,u.__data__,f,c),y,h=P(u,r),m=0,g=p.length;m<g;++m)(y=p[m])&&mt(y,e,r,m,p,h);i.push(p),s.push(u)}return new z(i,s,e,r)}var ff=ht.prototype.constructor;function Ji(){return new ff(this._groups,this._parents)}function df(t,e){var r,n,o;return function(){var i=Tt(this,t),s=(this.style.removeProperty(t),Tt(this,t));return i===s?null:i===r&&s===n?o:o=e(r=i,n=s)}}function Zi(t){return function(){this.style.removeProperty(t)}}function pf(t,e,r){var n,o=r+"",i;return function(){var s=Tt(this,t);return s===o?null:s===n?i:i=e(n=s,r)}}function hf(t,e,r){var n,o,i;return function(){var s=Tt(this,t),a=r(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),Tt(this,t))),s===c?null:s===n&&c===o?i:(o=c,i=e(n=s,a))}}function mf(t,e){var r,n,o,i="style."+e,s="end."+i,a;return function(){var c=O(this,t),l=c.on,u=c.value[i]==null?a||(a=Zi(e)):void 0;(l!==r||o!==u)&&(n=(r=l).copy()).on(s,o=u),c.on=n}}function Qi(t,e,r){var n=(t+="")==="transform"?Ri:lr;return e==null?this.styleTween(t,df(t,n)).on("end.style."+t,Zi(t)):typeof e=="function"?this.styleTween(t,hf(t,n,qt(this,"style."+t,e))).each(mf(this._id,t)):this.styleTween(t,pf(t,n,e),r).on("end.style."+t,null)}function gf(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function yf(t,e,r){var n,o;function i(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&gf(t,s,r)),n}return i._value=e,i}function ts(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,yf(t,e,r??""))}function xf(t){return function(){this.textContent=t}}function wf(t){return function(){var e=t(this);this.textContent=e??""}}function es(t){return this.tween("text",typeof t=="function"?wf(qt(this,"text",t)):xf(t==null?"":t+""))}function bf(t){return function(e){this.textContent=t.call(this,e)}}function vf(t){var e,r;function n(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&bf(o)),e}return n._value=t,n}function rs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,vf(t))}function ns(){for(var t=this._name,e=this._id,r=cr(),n=this._groups,o=n.length,i=0;i<o;++i)for(var s=n[i],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=P(c,e);mt(c,t,r,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new z(n,this._parents,t,r)}function os(){var t,e,r=this,n=r._id,o=r.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o==0&&i()}};r.each(function(){var l=O(this,n),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),o===0&&i()})}var Ef=0;function z(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function is(t){return ht().transition(t)}function cr(){return++Ef}var at=ht.prototype;z.prototype=is.prototype={constructor:z,select:Xi,selectAll:Yi,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:Ki,merge:Vi,selection:Ji,transition:ns,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:Gi,attr:Bi,attrTween:Hi,style:Qi,styleTween:ts,text:es,textTween:rs,remove:Wi,tween:Oi,delay:Ui,duration:zi,ease:qi,easeVarying:$i,end:os,[Symbol.iterator]:at[Symbol.iterator]};function ss(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var _f={time:null,delay:0,duration:250,ease:ss};function Sf(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function as(t){var e,r;t instanceof z?(e=t._id,t=t._name):(e=cr(),(r=_f).time=nr(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,i=0;i<o;++i)for(var s=n[i],a=s.length,c,l=0;l<a;++l)(c=s[l])&&mt(c,t,e,l,s,r||Sf(c,e));return new z(n,this._parents,t,e)}ht.prototype.interrupt=Li;ht.prototype.transition=as;function ls(t){return[+t[0],+t[1]]}function Tf(t){return[ls(t[0]),ls(t[1])]}var I0={name:"x",handles:["w","e"].map(Jr),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},L0={name:"y",handles:["n","s"].map(Jr),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},O0={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Jr),input:function(t){return t==null?null:Tf(t)},output:function(t){return t}};function Jr(t){return{type:t}}function us(t){let e=+this._x.call(null,t),r=+this._y.call(null,t);return cs(this.cover(e,r),e,r,t)}function cs(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var o,i=t._root,s={data:n},a=t._x0,c=t._y0,l=t._x1,u=t._y1,f,p,y,h,m,g,w,S;if(!i)return t._root=s,t;for(;i.length;)if((m=e>=(f=(a+l)/2))?a=f:l=f,(g=r>=(p=(c+u)/2))?c=p:u=p,o=i,!(i=i[w=g<<1|m]))return o[w]=s,t;if(y=+t._x.call(null,i.data),h=+t._y.call(null,i.data),e===y&&r===h)return s.next=i,o?o[w]=s:t._root=s,t;do o=o?o[w]=new Array(4):t._root=new Array(4),(m=e>=(f=(a+l)/2))?a=f:l=f,(g=r>=(p=(c+u)/2))?c=p:u=p;while((w=g<<1|m)==(S=(h>=p)<<1|y>=f));return o[S]=i,o[w]=s,t}function fs(t){var e,r,n=t.length,o,i,s=new Array(n),a=new Array(n),c=Infinity,l=Infinity,u=-Infinity,f=-Infinity;for(r=0;r<n;++r)isNaN(o=+this._x.call(null,e=t[r]))||isNaN(i=+this._y.call(null,e))||(s[r]=o,a[r]=i,o<c&&(c=o),o>u&&(u=o),i<l&&(l=i),i>f&&(f=i));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),r=0;r<n;++r)cs(this,s[r],a[r],t[r]);return this}function ds(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,o=this._x1,i=this._y1;if(isNaN(r))o=(r=Math.floor(t))+1,i=(n=Math.floor(e))+1;else{for(var s=o-r||1,a=this._root,c,l;r>t||t>=o||n>e||e>=i;)switch(l=(e<n)<<1|t<r,c=new Array(4),c[l]=a,a=c,s*=2,l){case 0:o=r+s,i=n+s;break;case 1:r=o-s,i=n+s;break;case 2:o=r+s,n=i-s;break;case 3:r=o-s,n=i-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=r,this._y0=n,this._x1=o,this._y1=i,this}function ps(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function hs(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function I(t,e,r,n,o){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=o}function ms(t,e,r){var n,o=this._x0,i=this._y0,s,a,c,l,u=this._x1,f=this._y1,p=[],y=this._root,h,m;for(y&&p.push(new I(y,o,i,u,f)),r==null?r=Infinity:(o=t-r,i=e-r,u=t+r,f=e+r,r*=r);h=p.pop();)if(!(!(y=h.node)||(s=h.x0)>u||(a=h.y0)>f||(c=h.x1)<o||(l=h.y1)<i))if(y.length){var g=(s+c)/2,w=(a+l)/2;p.push(new I(y[3],g,w,c,l),new I(y[2],s,w,g,l),new I(y[1],g,a,c,w),new I(y[0],s,a,g,w)),(m=(e>=w)<<1|t>=g)&&(h=p[p.length-1],p[p.length-1]=p[p.length-1-m],p[p.length-1-m]=h)}else{var S=t-+this._x.call(null,y.data),b=e-+this._y.call(null,y.data),C=S*S+b*b;if(C<r){var _=Math.sqrt(r=C);o=t-_,i=e-_,u=t+_,f=e+_,n=y.data}}return n}function gs(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,r=this._root,n,o,i,s=this._x0,a=this._y0,c=this._x1,l=this._y1,u,f,p,y,h,m,g,w;if(!r)return this;if(r.length)for(;;){if((h=u>=(p=(s+c)/2))?s=p:c=p,(m=f>=(y=(a+l)/2))?a=y:l=y,e=r,!(r=r[g=m<<1|h]))return this;if(!r.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,w=g)}for(;r.data!==t;)if(o=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,o?(i?o.next=i:delete o.next,this):e?(i?e[g]=i:delete e[g],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(n?n[w]=r:this._root=r),this):(this._root=i,this)}function ys(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this}function xs(){return this._root}function ws(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function bs(t){var e=[],r,n=this._root,o,i,s,a,c;for(n&&e.push(new I(n,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!t(n=r.node,i=r.x0,s=r.y0,a=r.x1,c=r.y1)&&n.length){var l=(i+a)/2,u=(s+c)/2;(o=n[3])&&e.push(new I(o,l,u,a,c)),(o=n[2])&&e.push(new I(o,i,u,l,c)),(o=n[1])&&e.push(new I(o,l,s,a,u)),(o=n[0])&&e.push(new I(o,i,s,l,u))}return this}function vs(t){var e=[],r=[],n;for(this._root&&e.push(new I(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var o=n.node;if(o.length){var i,s=n.x0,a=n.y0,c=n.x1,l=n.y1,u=(s+c)/2,f=(a+l)/2;(i=o[0])&&e.push(new I(i,s,a,u,f)),(i=o[1])&&e.push(new I(i,u,a,c,f)),(i=o[2])&&e.push(new I(i,s,f,u,l)),(i=o[3])&&e.push(new I(i,u,f,c,l))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function Es(t){return t[0]}function _s(t){return arguments.length?(this._x=t,this):this._x}function Ss(t){return t[1]}function Ts(t){return arguments.length?(this._y=t,this):this._y}function he(t,e,r){var n=new Zr(e??Es,r??Ss,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function Zr(t,e,r,n,o,i){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=o,this._y1=i,this._root=void 0}function As(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var q=he.prototype=Zr.prototype;q.copy=function(){var t=new Zr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,n;if(!e)return t;if(!e.length)return t._root=As(e),t;for(r=[{source:e,target:t._root=new Array(4)}];e=r.pop();)for(var o=0;o<4;++o)(n=e.source[o])&&(n.length?r.push({source:n,target:e.target[o]=new Array(4)}):e.target[o]=As(n));return t};q.add=us;q.addAll=fs;q.cover=ds;q.data=ps;q.extent=hs;q.find=ms;q.remove=gs;q.removeAll=ys;q.root=xs;q.size=ws;q.visit=bs;q.visitAfter=vs;q.x=_s;q.y=Ts;function Cs(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rt(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function ot(t){return t=Rt(Math.abs(t)),t?t[1]:NaN}function ks(t,e){return function(r,n){for(var o=r.length,i=[],s=0,a=t[0],c=0;o>0&&a>0&&(c+a+1>n&&(a=Math.max(1,n-c)),i.push(r.substring(o-=a,o+a)),!((c+=a+1)>n));)a=t[s=(s+1)%t.length];return i.reverse().join(e)}}function Rs(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Af=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mt(t){if(!(e=Af.exec(t)))throw new Error("invalid format: "+t);var e;return new Qr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mt.prototype=Qr.prototype;function Qr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Qr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ms(t){t:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var tn;function Ns(t,e){var r=Rt(t,e);if(!r)return t+"";var n=r[0],o=r[1],i=o-(tn=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Rt(t,Math.max(0,e+i-1))[0]}function en(t,e){var r=Rt(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var rn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Cs,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>en(t*100,e),r:en,s:Ns,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function nn(t){return t}var Ps=Array.prototype.map,Ds=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function js(t){var e=t.grouping===void 0||t.thousands===void 0?nn:ks(Ps.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?nn:Rs(Ps.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(f){f=Mt(f);var p=f.fill,y=f.align,h=f.sign,m=f.symbol,g=f.zero,w=f.width,S=f.comma,b=f.precision,C=f.trim,_=f.type;_==="n"?(S=!0,_="g"):rn[_]||(b===void 0&&(b=12),C=!0,_="g"),(g||p==="0"&&y==="=")&&(g=!0,p="0",y="=");var X=m==="$"?r:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",st=m==="$"?n:/[%p]/.test(_)?s:"",tt=rn[_],ut=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function Lt(A){var G=X,H=st,M,vt,ft;if(_==="c")H=tt(A)+H,A="";else{A=+A;var v=A<0||1/A<0;if(A=isNaN(A)?c:tt(Math.abs(A),b),C&&(A=Ms(A)),v&&+A==0&&h!=="+"&&(v=!1),G=(v?h==="("?h:a:h==="-"||h==="("?"":h)+G,H=(_==="s"?Ds[8+tn/3]:"")+H+(v&&h==="("?")":""),ut){for(M=-1,vt=A.length;++M<vt;)if(ft=A.charCodeAt(M),48>ft||ft>57){H=(ft===46?o+A.slice(M+1):A.slice(M))+H,A=A.slice(0,M);break}}}S&&!g&&(A=e(A,Infinity));var E=G.length+A.length+H.length,k=E<w?new Array(w-E+1).join(p):"";switch(S&&g&&(A=e(k+A,k.length?w-H.length:Infinity),k=""),y){case"<":A=G+A+H+k;break;case"=":A=G+k+A+H;break;case"^":A=k.slice(0,E=k.length>>1)+G+A+H+k.slice(E);break;default:A=k+G+A+H;break}return i(A)}return Lt.toString=function(){return f+""},Lt}function u(f,p){var y=l((f=Mt(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(ot(p)/3)))*3,m=Math.pow(10,-h),g=Ds[8+h/3];return function(w){return y(m*w)+g}}return{format:l,formatPrefix:u}}var ur,on,sn;Fs({thousands:",",grouping:[3],currency:["$",""]});function Fs(t){return ur=js(t),on=ur.format,sn=ur.formatPrefix,ur}function Is(t){return Math.max(0,-ot(Math.abs(t)))}function Ls(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ot(e)/3)))*3-ot(Math.abs(t)))}function Os(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ot(e)-ot(t))+1}function Bs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function an(t){return function(){return t}}function ln(t){return+t}var Hs=[0,1];function $t(t){return t}function cn(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:an(isNaN(e)?NaN:.5)}function Cf(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function kf(t,e,r){var n=t[0],o=t[1],i=e[0],s=e[1];return o<n?(n=cn(o,n),i=r(s,i)):(n=cn(n,o),i=r(i,s)),function(a){return i(n(a))}}function Rf(t,e,r){var n=Math.min(t.length,e.length)-1,o=new Array(n),i=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)o[s]=cn(t[s],t[s+1]),i[s]=r(e[s],e[s+1]);return function(a){var c=po(t,a,1,n)-1;return i[c](o[c](a))}}function Us(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Mf(){var t=Hs,e=Hs,r=Ut,n,o,i,s=$t,a,c,l;function u(){var p=Math.min(t.length,e.length);return s!==$t&&(s=Cf(t[0],t[p-1])),a=p>2?Rf:kf,c=l=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=a(t.map(n),e,r)))(n(s(p)))}return f.invert=function(p){return s(o((l||(l=a(e,t.map(n),B)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,ln),u()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),u()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),r=Si,u()},f.clamp=function(p){return arguments.length?(s=p?!0:$t,u()):s!==$t},f.interpolate=function(p){return arguments.length?(r=p,u()):r},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,y){return n=p,o=y,u()}}function un(){return Mf()($t,$t)}function fn(t,e,r,n){var o=ho(t,e,r),i;switch(n=Mt(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=Ls(o,s))&&(n.precision=i),sn(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Os(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Is(o))&&(n.precision=i-(n.type==="%")*2);break}}return on(n)}function Nf(t){var e=t.domain;return t.ticks=function(r){var n=e();return Or(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return fn(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,i=n.length-1,s=n[o],a=n[i],c,l,u=10;for(a<s&&(l=s,s=a,a=l,l=o,o=i,i=l);u-- >0;){if(l=Ie(s,a,r),l===c)return n[o]=s,n[i]=a,e(n);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;c=l}return t},t}function fr(){var t=un();return t.copy=function(){return Us(t,fr())},Bs.apply(t,arguments),Nf(t)}function gt(t,e,r){this.k=t,this.x=e,this.y=r}gt.prototype={constructor:gt,scale:function(t){return t===1?this:new gt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new gt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dn=new gt(1,0,0);pn.prototype=gt.prototype;function pn(t){for(;!t.__zoom;)if(!(t=t.parentNode))return dn;return t.__zoom}function dr(t){let e=500,r=100,n=20,o=50,i=ii(t).append("svg").attr("width",e).attr("height",r),s=15,a=Array.from({length:s},(m,g)=>({id:`node-${g}`,x:Math.random()*(e-2*n)+n,y:Math.random()*(r-2*n)+n,vx:Math.random()*2-1,vy:Math.random()*2-1,radius:Math.random()*5+2,pulseDelay:Math.random()*1e3,pulseRadius:Math.random()*3+2})),c=fr().domain([0,s/2,s]).range(["#e6f7ff","#91d5ff","#1890ff","#096dd9","#0050b3","#003a8c"]),l=he().x(m=>m.x).y(m=>m.y).addAll(a),u=[],f=i.selectAll(".node").data(a).enter().append("circle").attr("class","node").attr("fill",(m,g)=>c(g));function p(){u.length=0,a.forEach(m=>{l.visit((g,w,S,b,C)=>{if(!g.length)do{let _=g.data;if(_&&_!==m){let X=Math.sqrt((m.x-_.x)**2+(m.y-_.y)**2);if(X<o){let st=1-X/o;u.push({source:m,target:_,opacity:st})}}}while(g=g.next);return w>m.x+o||b<m.x-o||S>m.y+o||C<m.y-o})})}function y(){a.forEach(g=>{g.x+=g.vx,g.y+=g.vy,(g.x<n||g.x>e-n)&&(g.vx*=-1),(g.y<n||g.y>r-n)&&(g.vy*=-1)}),l=he().x(g=>g.x).y(g=>g.y).addAll(a),p();let m=i.selectAll(".link").data(u,g=>`${g.source.id}-${g.target.id}`);m.enter().append("line").attr("class","link").merge(m).attr("x1",g=>g.source.x).attr("y1",g=>g.source.y).attr("x2",g=>g.target.x).attr("y2",g=>g.target.y).attr("stroke","#999").attr("stroke-width",1).attr("opacity",g=>g.opacity),m.exit().remove(),f.attr("cx",g=>g.x).attr("cy",g=>g.y)}function h(m){m.transition().duration(1e3).delay(g=>g.pulseDelay).attr("r",g=>g.radius+g.pulseRadius).transition().duration(1e3).attr("r",g=>g.radius).on("end",()=>h(m))}f.attr("r",m=>m.radius),h(f),fe(y)}var qs={openAIApiKey:""},hn=class extends zs.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this;e.empty();let r=this.renderAnimationContainer();dr(r);let n=this.renderLinksContainer(),o=this.renderTabContainer(),i=this.renderSettingsContainer();this.showTab("brain")}renderAnimationContainer(){return this.containerEl.createDiv("animation-container")}renderTabContainer(){let e=this.containerEl.createDiv("tab-container");return this.renderTab(e,"brain","Brain"),this.renderTab(e,"tasks","Tasks"),this.renderTab(e,"recorder","Recorder"),this.renderTab(e,"templates","Templates"),this.renderTab(e,"data","Data"),this.renderTab(e,"about","About"),e}renderTab(e,r,n){let o=e.createDiv("tab");o.dataset.tabId=r,o.createSpan({text:n}),o.addEventListener("click",()=>this.showTab(r))}renderLinksContainer(){let e=this.containerEl.createDiv("links-container");return[{text:"SystemSculpt.com",url:"https://systemsculpt.com"},{text:"Buy Me a Coffee",url:"https://www.buymeacoffee.com/SystemSculpt"},{text:"Patreon",url:"https://www.patreon.com/SystemSculpt"},{text:"X/Twitter",url:"https://www.twitter.com/SystemSculpt"}].forEach(n=>{let o=e.createEl("a",{text:n.text,href:n.url,cls:"settings-link"});o.setAttr("target","_blank"),o.setAttr("rel","noopener noreferrer")}),e}renderSettingsContainer(){return this.containerEl.createDiv("settings-container")}showTab(e){let n=this.containerEl.querySelector(".tab-container").childNodes,o=this.containerEl.querySelector(".settings-container");switch(this.setActiveTab(n,e),o.empty(),e){case"brain":this.plugin.brainModule.settingsDisplay(o);break;case"tasks":this.plugin.tasksModule.settingsDisplay(o);break;case"templates":this.plugin.templatesModule.settingsDisplay(o);break;case"recorder":this.plugin.recorderModule.settingsDisplay(o);break;case"data":this.plugin.dataModule.settingsDisplay(o);break;case"about":this.plugin.aboutModule.settingsDisplay(o);break}}setActiveTab(e,r){e.forEach(n=>{n.dataset.tabId===r?n.addClass("active"):n.removeClass("active")})}};var Kt={defaultTaskPrompt:`You are TasksAI, an AI that masterfully takes in quickly noted task ideas and rewrites them as clear, actionable task(s).

Rules:
- Your answers must be succinct, with directly achievable task(s).
- If it's a simple task, no need to create sub-tasks.
- If the user would benefit from sub-tasks in order to break down the main, larger task, then provide those sub-tasks but do not over-complicate things.

Format:
Your answer should look like this:

- [ ] main_task_here

Or, if you deem the task worthy of having sub-tasks, like this:

- [ ] main_task_here
    - [ ] sub_task_1
    - [ ] sub_task_2
    - [ ] sub_task_3

However many sub-tasks you deem necessary without, again, going overboard in terms of complication.

The main objective is to always break down the user's tasks or notes into actionable items that they can set out to accomplish in high quality. That is your main purpose.

Now that you understand your objectives and purpose, here is the user's latest task:

"{task}"`,tasksLocation:"SystemSculpt/Tasks/Tasks.md"};var Ws=T(require("obsidian"));var $s=T(require("obsidian"));function Ks(t,e){new $s.Setting(t).setName("Task Prompt").setDesc("The prompt used when generating tasks. Use {task} as a placeholder for the task description.").addTextArea(r=>{r.setPlaceholder("Enter task prompt").setValue(e.settings.defaultTaskPrompt).onChange(async n=>{e.settings.defaultTaskPrompt=n,await e.saveSettings()}),r.inputEl.rows=3,r.inputEl.cols=50}).addExtraButton(r=>{r.setIcon("reset").setTooltip("Reset to default task prompt").onClick(async()=>{e.settings.defaultTaskPrompt=Kt.defaultTaskPrompt,await e.saveSettings(),e.settingsDisplay(t)})})}var Vs=T(require("obsidian"));function Gs(t,e){new Vs.Setting(t).setName("Tasks Location").setDesc("The file path where tasks will be stored").addText(r=>{r.setPlaceholder("Enter tasks location").setValue(e.settings.tasksLocation).onChange(async n=>{e.settings.tasksLocation=n,await e.saveSettings()})}).addExtraButton(r=>{r.setIcon("reset").setTooltip("Reset to default tasks location").onClick(async()=>{e.settings.tasksLocation=Kt.tasksLocation,await e.saveSettings(),e.settingsDisplay(t)})})}var mn=class extends Ws.PluginSettingTab{constructor(e,r,n){super(e,r.plugin);this.plugin=r,this.containerEl=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h3",{text:"Tasks Settings"}).addClass("ss-h3"),e.createEl("p",{text:"Tasks-specific settings such as the task prompt and the location of the task list."}),Ks(e,this.plugin),Gs(e,this.plugin);let n=e.createDiv("upcoming-features");n.createEl("h3",{text:"Upcoming Tasks Features"}).addClass("ss-h3");let i=n.createEl("ul");i.createEl("li",{text:"Ability to use SystemSculpt Recorder while making a new task, allowing you to speak your task instead of typing it"}),i.createEl("li",{text:"Auto-sorting tasks based on custom / AI-generated categories and projects (examples: Groceries List, Meeting With Mike, Reading List, Patio Project)"}),i.createEl("li",{text:"Option to merge the Tasks list into the user's Daily Note instead of a separate Tasks file"})}};var Xs=T(require("obsidian"));async function Ys(t){let{vault:e}=t.plugin.app,{tasksLocation:r}=t.settings,n=await e.getAbstractFileByPath(r);n&&n instanceof Xs.TFile?await t.plugin.app.workspace.getLeaf().openFile(n):console.error("Tasks file not found")}var pr=T(require("obsidian"));var me=T(require("obsidian")),gn=class extends me.Modal{constructor(e){super(e)}onOpen(){let{contentEl:e}=this;e.addClass("modal-content-centered"),e.createEl("h2",{text:"Generating Title..."}).addClass("modal-header");let n=this.contentEl.createDiv("spinner");n.createDiv("double-bounce1"),n.createDiv("double-bounce2")}onClose(){let{contentEl:e}=this;e.empty()}},yn=class extends me.Modal{constructor(e){super(e)}onOpen(){let{contentEl:e}=this;e.addClass("modal-content-centered"),e.createEl("h2",{text:"Generating Task..."}).addClass("modal-header");let n=this.contentEl.createDiv("spinner");n.createDiv("double-bounce1"),n.createDiv("double-bounce2")}onClose(){let{contentEl:e}=this;e.empty()}};function $(t,e=5e3){let r=new me.Notice("",e);r.noticeEl.innerHTML=`
    <div class="custom-notice-content">
      <div class="custom-notice-message">${t}</div>
    </div>
  `,r.noticeEl.addClass("custom-notice"),r.noticeEl.addEventListener("click",()=>r.hide());let n=document.body.querySelector(".notice-container");if(n)n.appendChild(r.noticeEl);else{let o=document.createElement("div");o.className="notice-container",document.body.appendChild(o),o.appendChild(r.noticeEl)}return r.noticeEl.style.position="fixed",r.noticeEl.style.bottom="20px",r.noticeEl.style.right="20px",r.noticeEl.style.top="auto",r.noticeEl.style.left="auto",r}function xn(t){t.hide()}var wn=class extends pr.Modal{constructor(e,r){super(e);this.plugin=r}async onOpen(){let{contentEl:e}=this;e.createEl("h2",{text:"Add Task"}),this.taskDescriptionInput=this.renderTaskDescriptionInput(e),this.renderButtons(e),this.registerKeyboardShortcuts()}renderTaskDescriptionInput(e){let r=new pr.Setting(e).setName("Task Description").setDesc("What you want to accomplish?").addTextArea(n=>n);return r.controlEl.classList.add("task-description-textarea"),r.controlEl.querySelector("textarea")}renderButtons(e){let r=e.createDiv();r.addClass("task-modal-button"),r.createEl("button",{text:"Add Task"}).addEventListener("click",this.addTask.bind(this))}registerKeyboardShortcuts(){this.scope.register(["Mod"],"Enter",this.addTask.bind(this)),this.scope.register(["Shift","Mod"],"Enter",this.addTaskAndReopen.bind(this))}async addTask(){let e=this.taskDescriptionInput.value.trim();e&&(await this.generateAndInsertTask(e),this.close())}async addTaskAndReopen(){let e=this.taskDescriptionInput.value.trim();e&&(await this.generateAndInsertTask(e),this.taskDescriptionInput.value="",this.taskDescriptionInput.focus())}async generateAndInsertTask(e){let r;try{r=new yn(this.app),r.open();let n=await this.plugin.generateTask(e);await this.plugin.insertGeneratedTask(n)}catch(n){console.error("Error generating task:",n),n.response&&n.response.status===401?$("Invalid API key. Please update your API key in the settings."):$("Failed to generate task. Please check your API key and try again.")}finally{r&&r.close()}}onClose(){let{contentEl:e}=this;e.empty()}};async function Js(t,e){let r=Pf(e,t.settings.defaultTaskPrompt),n=t.plugin.brainModule.settings.defaultOpenAIModelId||"gpt-3.5-turbo",o=t.plugin.brainModule.settings.temperature||.5,i=t.plugin.brainModule.settings.maxTokens||2048;try{return await t.plugin.brainModule.openAIService.createChatCompletion(r,n,o,i)}catch(s){throw console.error("Error generating task:",s),new Error("Failed to generate task. Please check your API key and try again.")}}function Pf(t,e){return e.replace("{task}",t)}var Zs=T(require("obsidian"));async function Qs(t,e){let{vault:r}=t.plugin.app,{tasksLocation:n}=t.settings;try{let o=Df(n),i=jf(n),s=Ff(i),a=`${o}/${s}`;await r.adapter.exists(o)||await r.createFolder(o);let l=await r.getAbstractFileByPath(a);if(l||(l=await r.create(a,"")),l instanceof Zs.TFile){let u=await r.read(l),p=(u!==""&&(!u.endsWith(`
`)||!u.endsWith(`

`))?`

`:"")+e;await r.append(l,p),$("Task added successfully!")}else $("Failed to add task. The specified file is not a valid TFile.")}catch(o){console.error("Error adding task:",o),$("Failed to add task. Please check the tasks location.")}}function Df(t){return t.substring(0,t.lastIndexOf("/"))}function jf(t){return t.substring(t.lastIndexOf("/")+1)}function Ff(t){return t.substring(t.lastIndexOf(".")+1).toLowerCase()!=="md"?`${t}.md`:t}var bn=class{constructor(e,r){this.plugin=e,this.brain=r}async load(){await this.loadSettings(),this.plugin.addCommand({id:"open-task-modal",name:"Add Task",callback:async()=>{new wn(this.plugin.app,this).open()}}),this.plugin.addCommand({id:"view-tasks",name:"View Tasks",callback:()=>{this.viewTasks()}})}async loadSettings(){this.settings=Object.assign({},Kt,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings)}settingsDisplay(e){new mn(this.plugin.app,this,e).display()}async viewTasks(){return Ys(this)}async generateTask(e){return Js(this,e)}async insertGeneratedTask(e){return Qs(this,e)}};var hr={openAIApiKey:"",defaultOpenAIModelId:"",generateTitlePrompt:`You are TitleMaster, an AI specialized in generating clear, concise, and informative titles for Obsidian notes.

Your role is to analyze the content of the provided note and create a title that:
- Accurately reflects the main topic or theme
- Is concise yet informative
- Uses relevant keywords
- Is grammatically correct and free of spelling errors
- Is creative and engaging, encouraging users to read the note

When generating titles, consider the following:
- For short notes, the title should capture the core idea
- For longer notes, focus on the central theme or most important point
- Use the same writing style and tone as the note content
- Avoid generic or vague titles
- Ensure consistency in formatting (e.g., capitalization, punctuation)
- Your generation response should be the title only, no Title: prefix, purely the title and nothing else.
- Do not use :, /, , or any other characters that cannot be included within a filename itself.

Here are some high quality note title examples:

- Mastering the Art of Effective Time Management in the Digital Age
- A ChatGPT Prompt For Creating A High Quality README Based On A Codebase
- Meeting Synopsis With Jeremy Rutger - 2024-02-15
- OpenRouter API Documentation

Here is the note content, within triple quotation mark delimeters:

"""
{note}
"""

Now with all these rules and note context, generate a high-quality title for this note.`,temperature:.2,maxTokens:1e3};var Nl=T(require("obsidian"));var El=T(require("obsidian"));"use strict";function ge(t,e){return function(){return t.apply(e,arguments)}}"use strict";var{toString:If}=Object.prototype,{getPrototypeOf:vn}=Object,mr=(t=>e=>{let r=If.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),it=t=>(t=t.toLowerCase(),e=>mr(e)===t),gr=t=>e=>typeof e===t,{isArray:Vt}=Array,ye=gr("undefined");function Lf(t){return t!==null&&!ye(t)&&t.constructor!==null&&!ye(t.constructor)&&Y(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var ta=it("ArrayBuffer");function Of(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ta(t.buffer),e}var Bf=gr("string"),Y=gr("function"),ea=gr("number"),yr=t=>t!==null&&typeof t=="object",Hf=t=>t===!0||t===!1,xr=t=>{if(mr(t)!=="object")return!1;let e=vn(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Uf=it("Date"),zf=it("File"),qf=it("Blob"),$f=it("FileList"),Kf=t=>yr(t)&&Y(t.pipe),Vf=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Y(t.append)&&((e=mr(t))==="formdata"||e==="object"&&Y(t.toString)&&t.toString()==="[object FormData]"))},Gf=it("URLSearchParams"),Wf=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xe(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t=="undefined")return;let n,o;if(typeof t!="object"&&(t=[t]),Vt(t))for(n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else{let i=r?Object.getOwnPropertyNames(t):Object.keys(t),s=i.length,a;for(n=0;n<s;n++)a=i[n],e.call(null,t[a],a,t)}}function ra(t,e){e=e.toLowerCase();let r=Object.keys(t),n=r.length,o;for(;n-- >0;)if(o=r[n],e===o.toLowerCase())return o;return null}var na=(()=>typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global)(),oa=t=>!ye(t)&&t!==na;function En(){let{caseless:t}=oa(this)&&this||{},e={},r=(n,o)=>{let i=t&&ra(e,o)||o;xr(e[i])&&xr(n)?e[i]=En(e[i],n):xr(n)?e[i]=En({},n):Vt(n)?e[i]=n.slice():e[i]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&xe(arguments[n],r);return e}var Xf=(t,e,r,{allOwnKeys:n}={})=>(xe(e,(o,i)=>{r&&Y(o)?t[i]=ge(o,r):t[i]=o},{allOwnKeys:n}),t),Yf=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Jf=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Zf=(t,e,r,n)=>{let o,i,s,a={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),i=o.length;i-- >0;)s=o[i],(!n||n(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=r!==!1&&vn(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Qf=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},td=t=>{if(!t)return null;if(Vt(t))return t;let e=t.length;if(!ea(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},ed=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&vn(Uint8Array)),rd=(t,e)=>{let n=(t&&t[Symbol.iterator]).call(t),o;for(;(o=n.next())&&!o.done;){let i=o.value;e.call(t,i[0],i[1])}},nd=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},od=it("HTMLFormElement"),id=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),ia=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),sd=it("RegExp"),sa=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};xe(r,(o,i)=>{let s;(s=e(o,i,t))!==!1&&(n[i]=s||o)}),Object.defineProperties(t,n)},ad=t=>{sa(t,(e,r)=>{if(Y(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(!!Y(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ld=(t,e)=>{let r={},n=o=>{o.forEach(i=>{r[i]=!0})};return Vt(t)?n(t):n(String(t).split(e)),r},cd=()=>{},ud=(t,e)=>(t=+t,Number.isFinite(t)?t:e),_n="abcdefghijklmnopqrstuvwxyz",aa="0123456789",la={DIGIT:aa,ALPHA:_n,ALPHA_DIGIT:_n+_n.toUpperCase()+aa},fd=(t=16,e=la.ALPHA_DIGIT)=>{let r="",{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function dd(t){return!!(t&&Y(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var pd=t=>{let e=new Array(10),r=(n,o)=>{if(yr(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[o]=n;let i=Vt(n)?[]:{};return xe(n,(s,a)=>{let c=r(s,o+1);!ye(c)&&(i[a]=c)}),e[o]=void 0,i}}return n};return r(t,0)},hd=it("AsyncFunction"),md=t=>t&&(yr(t)||Y(t))&&Y(t.then)&&Y(t.catch),d={isArray:Vt,isArrayBuffer:ta,isBuffer:Lf,isFormData:Vf,isArrayBufferView:Of,isString:Bf,isNumber:ea,isBoolean:Hf,isObject:yr,isPlainObject:xr,isUndefined:ye,isDate:Uf,isFile:zf,isBlob:qf,isRegExp:sd,isFunction:Y,isStream:Kf,isURLSearchParams:Gf,isTypedArray:ed,isFileList:$f,forEach:xe,merge:En,extend:Xf,trim:Wf,stripBOM:Yf,inherits:Jf,toFlatObject:Zf,kindOf:mr,kindOfTest:it,endsWith:Qf,toArray:td,forEachEntry:rd,matchAll:nd,isHTMLForm:od,hasOwnProperty:ia,hasOwnProp:ia,reduceDescriptors:sa,freezeMethods:ad,toObjectSet:ld,toCamelCase:id,noop:cd,toFiniteNumber:ud,findKey:ra,global:na,isContextDefined:oa,ALPHABET:la,generateString:fd,isSpecCompliantForm:dd,toJSONObject:pd,isAsyncFn:hd,isThenable:md};"use strict";function Gt(t,e,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}d.inherits(Gt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ca=Gt.prototype,ua={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ua[t]={value:t}});Object.defineProperties(Gt,ua);Object.defineProperty(ca,"isAxiosError",{value:!0});Gt.from=(t,e,r,n,o,i)=>{let s=Object.create(ca);return d.toFlatObject(t,s,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Gt.call(s,t.message,e,r,n,o),s.cause=t,s.name=t.name,i&&Object.assign(s,i),s};var x=Gt;var pa=T(da()),wr=pa.default;"use strict";function Sn(t){return d.isPlainObject(t)||d.isArray(t)}function ha(t){return d.endsWith(t,"[]")?t.slice(0,-2):t}function ma(t,e,r){return t?t.concat(e).map(function(o,i){return o=ha(o),!r&&i?"["+o+"]":o}).join(r?".":""):e}function gd(t){return d.isArray(t)&&!t.some(Sn)}var yd=d.toFlatObject(d,{},null,function(e){return/^is[A-Z]/.test(e)});function xd(t,e,r){if(!d.isObject(t))throw new TypeError("target must be an object");e=e||new(wr||FormData),r=d.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!d.isUndefined(g[m])});let n=r.metaTokens,o=r.visitor||u,i=r.dots,s=r.indexes,c=(r.Blob||typeof Blob!="undefined"&&Blob)&&d.isSpecCompliantForm(e);if(!d.isFunction(o))throw new TypeError("visitor must be a function");function l(h){if(h===null)return"";if(d.isDate(h))return h.toISOString();if(!c&&d.isBlob(h))throw new x("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(h)||d.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,m,g){let w=h;if(h&&!g&&typeof h=="object"){if(d.endsWith(m,"{}"))m=n?m:m.slice(0,-2),h=JSON.stringify(h);else if(d.isArray(h)&&gd(h)||(d.isFileList(h)||d.endsWith(m,"[]"))&&(w=d.toArray(h)))return m=ha(m),w.forEach(function(b,C){!(d.isUndefined(b)||b===null)&&e.append(s===!0?ma([m],C,i):s===null?m:m+"[]",l(b))}),!1}return Sn(h)?!0:(e.append(ma(g,m,i),l(h)),!1)}let f=[],p=Object.assign(yd,{defaultVisitor:u,convertValue:l,isVisitable:Sn});function y(h,m){if(!d.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(h),d.forEach(h,function(w,S){(!(d.isUndefined(w)||w===null)&&o.call(e,w,d.isString(S)?S.trim():S,m,p))===!0&&y(w,m?m.concat(S):[S])}),f.pop()}}if(!d.isObject(t))throw new TypeError("data must be an object");return y(t),e}var yt=xd;"use strict";function ga(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ya(t,e){this._pairs=[],t&&yt(t,this,e)}var xa=ya.prototype;xa.append=function(e,r){this._pairs.push([e,r])};xa.toString=function(e){let r=e?function(n){return e.call(this,n,ga)}:ga;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};var wa=ya;"use strict";function wd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nt(t,e,r){if(!e)return t;let n=r&&r.encode||wd,o=r&&r.serialize,i;if(o?i=o(e,r):i=d.isURLSearchParams(e)?e.toString():new wa(e,r).toString(n),i){let s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}"use strict";var ba=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){d.forEach(this.handlers,function(n){n!==null&&e(n)})}},Tn=ba;"use strict";var Wt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var va=T(require("url"));"use strict";var Ea=va.default.URLSearchParams;var _a={isNode:!0,classes:{URLSearchParams:Ea,FormData:wr,Blob:typeof Blob!="undefined"&&Blob||null},protocols:["http","https","file","data"]};var An={};uo(An,{hasBrowserEnv:()=>Sa,hasStandardBrowserEnv:()=>bd,hasStandardBrowserWebWorkerEnv:()=>vd});var Sa=typeof window!="undefined"&&typeof document!="undefined",bd=(t=>Sa&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator!="undefined"&&navigator.product),vd=(()=>typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var D={...An,..._a};"use strict";function Cn(t,e){return yt(t,new D.classes.URLSearchParams,Object.assign({visitor:function(r,n,o,i){return D.isNode&&d.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}"use strict";function Ed(t){return d.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _d(t){let e={},r=Object.keys(t),n,o=r.length,i;for(n=0;n<o;n++)i=r[n],e[i]=t[i];return e}function Sd(t){function e(r,n,o,i){let s=r[i++];if(s==="__proto__")return!0;let a=Number.isFinite(+s),c=i>=r.length;return s=!s&&d.isArray(o)?o.length:s,c?(d.hasOwnProp(o,s)?o[s]=[o[s],n]:o[s]=n,!a):((!o[s]||!d.isObject(o[s]))&&(o[s]=[]),e(r,n,o[s],i)&&d.isArray(o[s])&&(o[s]=_d(o[s])),!a)}if(d.isFormData(t)&&d.isFunction(t.entries)){let r={};return d.forEachEntry(t,(n,o)=>{e(Ed(n),o,r,0)}),r}return null}var br=Sd;"use strict";function Td(t,e,r){if(d.isString(t))try{return(e||JSON.parse)(t),d.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var kn={transitional:Wt,adapter:["xhr","http"],transformRequest:[function(e,r){let n=r.getContentType()||"",o=n.indexOf("application/json")>-1,i=d.isObject(e);if(i&&d.isHTMLForm(e)&&(e=new FormData(e)),d.isFormData(e))return o?JSON.stringify(br(e)):e;if(d.isArrayBuffer(e)||d.isBuffer(e)||d.isStream(e)||d.isFile(e)||d.isBlob(e))return e;if(d.isArrayBufferView(e))return e.buffer;if(d.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Cn(e,this.formSerializer).toString();if((a=d.isFileList(e))||n.indexOf("multipart/form-data")>-1){let c=this.env&&this.env.FormData;return yt(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),Td(e)):e}],transformResponse:[function(e){let r=this.transitional||kn.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if(e&&d.isString(e)&&(n&&!this.responseType||o)){let s=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?x.from(a,x.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:D.classes.FormData,Blob:D.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],t=>{kn.headers[t]={}});var Xt=kn;"use strict";var Ad=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ta=t=>{let e={},r,n,o;return t&&t.split(`
`).forEach(function(s){o=s.indexOf(":"),r=s.substring(0,o).trim().toLowerCase(),n=s.substring(o+1).trim(),!(!r||e[r]&&Ad[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};"use strict";var Aa=Symbol("internals");function we(t){return t&&String(t).trim().toLowerCase()}function vr(t){return t===!1||t==null?t:d.isArray(t)?t.map(vr):String(t)}function Cd(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}var kd=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rn(t,e,r,n,o){if(d.isFunction(n))return n.call(this,e,r);if(o&&(e=r),!!d.isString(e)){if(d.isString(n))return e.indexOf(n)!==-1;if(d.isRegExp(n))return n.test(e)}}function Rd(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Md(t,e){let r=d.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(o,i,s){return this[n].call(this,e,o,i,s)},configurable:!0})})}var be=class{constructor(e){e&&this.set(e)}set(e,r,n){let o=this;function i(a,c,l){let u=we(c);if(!u)throw new Error("header name must be a non-empty string");let f=d.findKey(o,u);(!f||o[f]===void 0||l===!0||l===void 0&&o[f]!==!1)&&(o[f||c]=vr(a))}let s=(a,c)=>d.forEach(a,(l,u)=>i(l,u,c));return d.isPlainObject(e)||e instanceof this.constructor?s(e,r):d.isString(e)&&(e=e.trim())&&!kd(e)?s(Ta(e),r):e!=null&&i(r,e,n),this}get(e,r){if(e=we(e),e){let n=d.findKey(this,e);if(n){let o=this[n];if(!r)return o;if(r===!0)return Cd(o);if(d.isFunction(r))return r.call(this,o,n);if(d.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=we(e),e){let n=d.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Rn(this,this[n],n,r)))}return!1}delete(e,r){let n=this,o=!1;function i(s){if(s=we(s),s){let a=d.findKey(n,s);a&&(!r||Rn(n,n[a],a,r))&&(delete n[a],o=!0)}}return d.isArray(e)?e.forEach(i):i(e),o}clear(e){let r=Object.keys(this),n=r.length,o=!1;for(;n--;){let i=r[n];(!e||Rn(this,this[i],i,e,!0))&&(delete this[i],o=!0)}return o}normalize(e){let r=this,n={};return d.forEach(this,(o,i)=>{let s=d.findKey(n,i);if(s){r[s]=vr(o),delete r[i];return}let a=e?Rd(i):String(i).trim();a!==i&&delete r[i],r[a]=vr(o),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return d.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=e&&d.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(o=>n.set(o)),n}static accessor(e){let n=(this[Aa]=this[Aa]={accessors:{}}).accessors,o=this.prototype;function i(s){let a=we(s);n[a]||(Md(o,s),n[a]=!0)}return d.isArray(e)?e.forEach(i):i(e),this}};be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(be.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});d.freezeMethods(be);var j=be;"use strict";function ve(t,e){let r=this||Xt,n=e||r,o=j.from(n.headers),i=n.data;return d.forEach(t,function(a){i=a.call(r,i,o.normalize(),e?e.status:void 0)}),o.normalize(),i}"use strict";function Ee(t){return!!(t&&t.__CANCEL__)}"use strict";function Ca(t,e,r){x.call(this,t??"canceled",x.ERR_CANCELED,e,r),this.name="CanceledError"}d.inherits(Ca,x,{__CANCEL__:!0});var Q=Ca;"use strict";function xt(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new x("Request failed with status code "+r.status,[x.ERR_BAD_REQUEST,x.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}"use strict";function Mn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}"use strict";function Nn(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}"use strict";function Pt(t,e){return t&&!Mn(e)?Nn(t,e):e}var tl=T(Ra()),el=T(require("http")),rl=T(require("https")),nl=T(require("util")),ol=T(Ua()),lt=T(require("zlib"));var Ft="1.6.7";"use strict";function ke(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}"use strict";var ip=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function $n(t,e,r){let n=r&&r.Blob||D.classes.Blob,o=ke(t);if(e===void 0&&n&&(e=!0),o==="data"){t=o.length?t.slice(o.length+1):t;let i=ip.exec(t);if(!i)throw new x("Invalid URL",x.ERR_INVALID_URL);let s=i[1],a=i[2],c=i[3],l=Buffer.from(decodeURIComponent(c),a?"base64":"utf8");if(e){if(!n)throw new x("Blob is not supported",x.ERR_NOT_SUPPORT);return new n([l],{type:s})}return l}throw new x("Unsupported protocol "+o,x.ERR_NOT_SUPPORT)}var It=T(require("stream"));var qa=T(require("stream"));"use strict";function sp(t,e){let r=0,n=1e3/e,o=null;return function(s,a){let c=Date.now();if(s||c-r>n)return o&&(clearTimeout(o),o=null),r=c,t.apply(null,a);o||(o=setTimeout(()=>(o=null,r=Date.now(),t.apply(null,a)),n-(c-r)))}}var za=sp;"use strict";function ap(t,e){t=t||10;let r=new Array(t),n=new Array(t),o=0,i=0,s;return e=e!==void 0?e:1e3,function(c){let l=Date.now(),u=n[i];s||(s=l),r[o]=c,n[o]=l;let f=i,p=0;for(;f!==o;)p+=r[f++],f=f%t;if(o=(o+1)%t,o===i&&(i=(i+1)%t),l-s<e)return;let y=u&&l-u;return y?Math.round(p*1e3/y):void 0}}var Sr=ap;"use strict";var Tr=Symbol("internals"),$a=class extends qa.default.Transform{constructor(e){e=d.toFlatObject(e,{maxRate:0,chunkSize:64*1024,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(a,c)=>!d.isUndefined(c[a])),super({readableHighWaterMark:e.chunkSize});let r=this,n=this[Tr]={length:e.length,timeWindow:e.timeWindow,ticksRate:e.ticksRate,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null},o=Sr(n.ticksRate*e.samplesCount,n.timeWindow);this.on("newListener",a=>{a==="progress"&&(n.isCaptured||(n.isCaptured=!0))});let i=0;n.updateProgress=za(function(){let c=n.length,l=n.bytesSeen,u=l-i;if(!u||r.destroyed)return;let f=o(u);i=l,process.nextTick(()=>{r.emit("progress",{loaded:l,total:c,progress:c?l/c:void 0,bytes:u,rate:f||void 0,estimated:f&&c&&l<=c?(c-l)/f:void 0})})},n.ticksRate);let s=()=>{n.updateProgress(!0)};this.once("end",s),this.once("error",s)}_read(e){let r=this[Tr];return r.onReadCallback&&r.onReadCallback(),super._read(e)}_transform(e,r,n){let o=this,i=this[Tr],s=i.maxRate,a=this.readableHighWaterMark,c=i.timeWindow,l=1e3/c,u=s/l,f=i.minChunkSize!==!1?Math.max(i.minChunkSize,u*.01):0;function p(h,m){let g=Buffer.byteLength(h);i.bytesSeen+=g,i.bytes+=g,i.isCaptured&&i.updateProgress(),o.push(h)?process.nextTick(m):i.onReadCallback=()=>{i.onReadCallback=null,process.nextTick(m)}}let y=(h,m)=>{let g=Buffer.byteLength(h),w=null,S=a,b,C=0;if(s){let _=Date.now();(!i.ts||(C=_-i.ts)>=c)&&(i.ts=_,b=u-i.bytes,i.bytes=b<0?-b:0,C=0),b=u-i.bytes}if(s){if(b<=0)return setTimeout(()=>{m(null,h)},c-C);b<S&&(S=b)}S&&g>S&&g-S>f&&(w=h.subarray(S),h=h.subarray(0,S)),p(h,w?()=>{process.nextTick(m,null,w)}:m)};y(e,function h(m,g){if(m)return n(m);g?y(g,h):n(null)})}setLength(e){return this[Tr].length=+e,this}},Kn=$a;var il=T(require("events"));var Va=T(require("util")),Ga=T(require("stream"));var{asyncIterator:Ka}=Symbol,lp=async function*(t){t.stream?yield*t.stream():t.arrayBuffer?yield await t.arrayBuffer():t[Ka]?yield*t[Ka]():yield t},Ar=lp;var cp=d.ALPHABET.ALPHA_DIGIT+"-_",Re=new Va.TextEncoder,wt=`\r
`,up=Re.encode(wt),fp=2,Wa=class{constructor(e,r){let{escapeName:n}=this.constructor,o=d.isString(r),i=`Content-Disposition: form-data; name="${n(e)}"${!o&&r.name?`; filename="${n(r.name)}"`:""}${wt}`;o?r=Re.encode(String(r).replace(/\r?\n|\r\n?/g,wt)):i+=`Content-Type: ${r.type||"application/octet-stream"}${wt}`,this.headers=Re.encode(i+wt),this.contentLength=o?r.byteLength:r.size,this.size=this.headers.byteLength+this.contentLength+fp,this.name=e,this.value=r}async*encode(){yield this.headers;let{value:e}=this;d.isTypedArray(e)?yield e:yield*Ar(e),yield up}static escapeName(e){return String(e).replace(/[\r\n"]/g,r=>({"\r":"%0D","\n":"%0A",'"':"%22"})[r])}},dp=(t,e,r)=>{let{tag:n="form-data-boundary",size:o=25,boundary:i=n+"-"+d.generateString(o,cp)}=r||{};if(!d.isFormData(t))throw TypeError("FormData instance required");if(i.length<1||i.length>70)throw Error("boundary must be 10-70 characters long");let s=Re.encode("--"+i+wt),a=Re.encode("--"+i+"--"+wt+wt),c=a.byteLength,l=Array.from(t.entries()).map(([f,p])=>{let y=new Wa(f,p);return c+=y.size,y});c+=s.byteLength*l.length,c=d.toFiniteNumber(c);let u={"Content-Type":`multipart/form-data; boundary=${i}`};return Number.isFinite(c)&&(u["Content-Length"]=c),e&&e(u),Ga.Readable.from(async function*(){for(let f of l)yield s,yield*f.encode();yield a}())},Xa=dp;var Ya=T(require("stream"));"use strict";var Ja=class extends Ya.default.Transform{__transform(e,r,n){this.push(e),n()}_transform(e,r,n){if(e.length!==0&&(this._transform=this.__transform,e[0]!==120)){let o=Buffer.alloc(2);o[0]=120,o[1]=156,this.push(o,r)}this.__transform(e,r,n)}},Za=Ja;var pp=(t,e)=>d.isAsyncFn(t)?function(...r){let n=r.pop();t.apply(this,r).then(o=>{try{e?n(null,...e(o)):n(null,o)}catch(i){n(i)}},n)}:t,Qa=pp;"use strict";var sl={flush:lt.default.constants.Z_SYNC_FLUSH,finishFlush:lt.default.constants.Z_SYNC_FLUSH},hp={flush:lt.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:lt.default.constants.BROTLI_OPERATION_FLUSH},al=d.isFunction(lt.default.createBrotliDecompress),{http:mp,https:gp}=ol.default,yp=/https:?/,ll=D.protocols.map(t=>t+":");function xp(t,e){t.beforeRedirects.proxy&&t.beforeRedirects.proxy(t),t.beforeRedirects.config&&t.beforeRedirects.config(t,e)}function cl(t,e,r){let n=e;if(!n&&n!==!1){let o=(0,tl.getProxyForUrl)(r);o&&(n=new URL(o))}if(n){if(n.username&&(n.auth=(n.username||"")+":"+(n.password||"")),n.auth){(n.auth.username||n.auth.password)&&(n.auth=(n.auth.username||"")+":"+(n.auth.password||""));let i=Buffer.from(n.auth,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+i}t.headers.host=t.hostname+(t.port?":"+t.port:"");let o=n.hostname||n.host;t.hostname=o,t.host=o,t.port=n.port,t.path=r,n.protocol&&(t.protocol=n.protocol.includes(":")?n.protocol:`${n.protocol}:`)}t.beforeRedirects.proxy=function(i){cl(i,e,i.href)}}var wp=typeof process!="undefined"&&d.kindOf(process)==="process",bp=t=>new Promise((e,r)=>{let n,o,i=(c,l)=>{o||(o=!0,n&&n(c,l))},s=c=>{i(c),e(c)},a=c=>{i(c,!0),r(c)};t(s,a,c=>n=c).catch(a)}),vp=({address:t,family:e})=>{if(!d.isString(t))throw TypeError("address must be a string");return{address:t,family:e||(t.indexOf(".")<0?6:4)}},ul=(t,e)=>vp(d.isObject(t)?t:{address:t,family:e}),fl=wp&&function(e){return bp(async function(n,o,i){let{data:s,lookup:a,family:c}=e,{responseType:l,responseEncoding:u}=e,f=e.method.toUpperCase(),p,y=!1,h;if(a){let v=Qa(a,E=>d.isArray(E)?E:[E]);a=(E,k,Et)=>{v(E,k,(L,dt,jr)=>{if(L)return Et(L);let et=d.isArray(dt)?dt.map(J=>ul(J)):[ul(dt,jr)];k.all?Et(L,et):Et(L,et[0].address,et[0].family)})}}let m=new il.default,g=()=>{e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w),m.removeAllListeners()};i((v,E)=>{p=!0,E&&(y=!0,g())});function w(v){m.emit("abort",!v||v.type?new Q(null,e,h):v)}m.once("abort",o),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w)));let S=Pt(e.baseURL,e.url),b=new URL(S,"http://localhost"),C=b.protocol||ll[0];if(C==="data:"){let v;if(f!=="GET")return xt(n,o,{status:405,statusText:"method not allowed",headers:{},config:e});try{v=$n(e.url,l==="blob",{Blob:e.env&&e.env.Blob})}catch(E){throw x.from(E,x.ERR_BAD_REQUEST,e)}return l==="text"?(v=v.toString(u),(!u||u==="utf8")&&(v=d.stripBOM(v))):l==="stream"&&(v=It.default.Readable.from(v)),xt(n,o,{data:v,status:200,statusText:"OK",headers:new j,config:e})}if(ll.indexOf(C)===-1)return o(new x("Unsupported protocol "+C,x.ERR_BAD_REQUEST,e));let _=j.from(e.headers).normalize();_.set("User-Agent","axios/"+Ft,!1);let X=e.onDownloadProgress,st=e.onUploadProgress,tt=e.maxRate,ut,Lt;if(d.isSpecCompliantForm(s)){let v=_.getContentType(/boundary=([-_\w\d]{10,70})/i);s=Xa(s,E=>{_.set(E)},{tag:`axios-${Ft}-boundary`,boundary:v&&v[1]||void 0})}else if(d.isFormData(s)&&d.isFunction(s.getHeaders)){if(_.set(s.getHeaders()),!_.hasContentLength())try{let v=await nl.default.promisify(s.getLength).call(s);Number.isFinite(v)&&v>=0&&_.setContentLength(v)}catch(v){}}else if(d.isBlob(s))s.size&&_.setContentType(s.type||"application/octet-stream"),_.setContentLength(s.size||0),s=It.default.Readable.from(Ar(s));else if(s&&!d.isStream(s)){if(!Buffer.isBuffer(s))if(d.isArrayBuffer(s))s=Buffer.from(new Uint8Array(s));else if(d.isString(s))s=Buffer.from(s,"utf-8");else return o(new x("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",x.ERR_BAD_REQUEST,e));if(_.setContentLength(s.length,!1),e.maxBodyLength>-1&&s.length>e.maxBodyLength)return o(new x("Request body larger than maxBodyLength limit",x.ERR_BAD_REQUEST,e))}let A=d.toFiniteNumber(_.getContentLength());d.isArray(tt)?(ut=tt[0],Lt=tt[1]):ut=Lt=tt,s&&(st||ut)&&(d.isStream(s)||(s=It.default.Readable.from(s,{objectMode:!1})),s=It.default.pipeline([s,new Kn({length:A,maxRate:d.toFiniteNumber(ut)})],d.noop),st&&s.on("progress",v=>{st(Object.assign(v,{upload:!0}))}));let G;if(e.auth){let v=e.auth.username||"",E=e.auth.password||"";G=v+":"+E}if(!G&&b.username){let v=b.username,E=b.password;G=v+":"+E}G&&_.delete("authorization");let H;try{H=Nt(b.pathname+b.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(v){let E=new Error(v.message);return E.config=e,E.url=e.url,E.exists=!0,o(E)}_.set("Accept-Encoding","gzip, compress, deflate"+(al?", br":""),!1);let M={path:H,method:f,headers:_.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:G,protocol:C,family:c,beforeRedirect:xp,beforeRedirects:{}};!d.isUndefined(a)&&(M.lookup=a),e.socketPath?M.socketPath=e.socketPath:(M.hostname=b.hostname,M.port=b.port,cl(M,e.proxy,C+"//"+b.hostname+(b.port?":"+b.port:"")+M.path));let vt,ft=yp.test(M.protocol);if(M.agent=ft?e.httpsAgent:e.httpAgent,e.transport?vt=e.transport:e.maxRedirects===0?vt=ft?rl.default:el.default:(e.maxRedirects&&(M.maxRedirects=e.maxRedirects),e.beforeRedirect&&(M.beforeRedirects.config=e.beforeRedirect),vt=ft?gp:mp),e.maxBodyLength>-1?M.maxBodyLength=e.maxBodyLength:M.maxBodyLength=Infinity,e.insecureHTTPParser&&(M.insecureHTTPParser=e.insecureHTTPParser),h=vt.request(M,function(E){if(h.destroyed)return;let k=[E],Et=+E.headers["content-length"];if(X){let J=new Kn({length:d.toFiniteNumber(Et),maxRate:d.toFiniteNumber(Lt)});X&&J.on("progress",Pe=>{X(Object.assign(Pe,{download:!0}))}),k.push(J)}let L=E,dt=E.req||h;if(e.decompress!==!1&&E.headers["content-encoding"])switch((f==="HEAD"||E.statusCode===204)&&delete E.headers["content-encoding"],(E.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":k.push(lt.default.createUnzip(sl)),delete E.headers["content-encoding"];break;case"deflate":k.push(new Za),k.push(lt.default.createUnzip(sl)),delete E.headers["content-encoding"];break;case"br":al&&(k.push(lt.default.createBrotliDecompress(hp)),delete E.headers["content-encoding"])}L=k.length>1?It.default.pipeline(k,d.noop):k[0];let jr=It.default.finished(L,()=>{jr(),g()}),et={status:E.statusCode,statusText:E.statusMessage,headers:new j(E.headers),config:e,request:dt};if(l==="stream")et.data=L,xt(n,o,et);else{let J=[],Pe=0;L.on("data",function(U){J.push(U),Pe+=U.length,e.maxContentLength>-1&&Pe>e.maxContentLength&&(y=!0,L.destroy(),o(new x("maxContentLength size of "+e.maxContentLength+" exceeded",x.ERR_BAD_RESPONSE,e,dt)))}),L.on("aborted",function(){if(y)return;let U=new x("maxContentLength size of "+e.maxContentLength+" exceeded",x.ERR_BAD_RESPONSE,e,dt);L.destroy(U),o(U)}),L.on("error",function(U){h.destroyed||o(x.from(U,null,e,dt))}),L.on("end",function(){try{let U=J.length===1?J[0]:Buffer.concat(J);l!=="arraybuffer"&&(U=U.toString(u),(!u||u==="utf8")&&(U=d.stripBOM(U))),et.data=U}catch(U){return o(x.from(U,null,e,et.request,et))}xt(n,o,et)})}m.once("abort",J=>{L.destroyed||(L.emit("error",J),L.destroy())})}),m.once("abort",v=>{o(v),h.destroy(v)}),h.on("error",function(E){o(x.from(E,null,e,h))}),h.on("socket",function(E){E.setKeepAlive(!0,1e3*60)}),e.timeout){let v=parseInt(e.timeout,10);if(Number.isNaN(v)){o(new x("error trying to parse `config.timeout` to int",x.ERR_BAD_OPTION_VALUE,e,h));return}h.setTimeout(v,function(){if(p)return;let k=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",Et=e.transitional||Wt;e.timeoutErrorMessage&&(k=e.timeoutErrorMessage),o(new x(k,Et.clarifyTimeoutError?x.ETIMEDOUT:x.ECONNABORTED,e,h)),w()})}if(d.isStream(s)){let v=!1,E=!1;s.on("end",()=>{v=!0}),s.once("error",k=>{E=!0,h.destroy(k)}),s.on("close",()=>{!v&&!E&&w(new Q("Request stream has been aborted",e,h))}),s.pipe(h)}else h.end(s)})};var dl=D.hasStandardBrowserEnv?{write(t,e,r,n,o,i){let s=[t+"="+encodeURIComponent(e)];d.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),d.isString(n)&&s.push("path="+n),d.isString(o)&&s.push("domain="+o),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){let e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};"use strict";var pl=D.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){let s=i;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(s){let a=d.isString(s)?o(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();"use strict";function hl(t,e){let r=0,n=Sr(50,250);return o=>{let i=o.loaded,s=o.lengthComputable?o.total:void 0,a=i-r,c=n(a),l=i<=s;r=i;let u={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&l?(s-i)/c:void 0,event:o};u[e?"download":"upload"]=!0,t(u)}}var Ep=typeof XMLHttpRequest!="undefined",ml=Ep&&function(t){return new Promise(function(r,n){let o=t.data,i=j.from(t.headers).normalize(),{responseType:s,withXSRFToken:a}=t,c;function l(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(d.isFormData(o)){if(D.hasStandardBrowserEnv||D.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){let[m,...g]=u?u.split(";").map(w=>w.trim()).filter(Boolean):[];i.setContentType([m||"multipart/form-data",...g].join("; "))}}let f=new XMLHttpRequest;if(t.auth){let m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}let p=Pt(t.baseURL,t.url);f.open(t.method.toUpperCase(),Nt(p,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function y(){if(!f)return;let m=j.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),w={data:!s||s==="text"||s==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:m,config:t,request:f};xt(function(b){r(b),l()},function(b){n(b),l()},w),f=null}if("onloadend"in f?f.onloadend=y:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(y)},f.onabort=function(){!f||(n(new x("Request aborted",x.ECONNABORTED,t,f)),f=null)},f.onerror=function(){n(new x("Network Error",x.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",w=t.transitional||Wt;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),n(new x(g,w.clarifyTimeoutError?x.ETIMEDOUT:x.ECONNABORTED,t,f)),f=null},D.hasStandardBrowserEnv&&(a&&d.isFunction(a)&&(a=a(t)),a||a!==!1&&pl(p))){let m=t.xsrfHeaderName&&t.xsrfCookieName&&dl.read(t.xsrfCookieName);m&&i.set(t.xsrfHeaderName,m)}o===void 0&&i.setContentType(null),"setRequestHeader"in f&&d.forEach(i.toJSON(),function(g,w){f.setRequestHeader(w,g)}),d.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),s&&s!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",hl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",hl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=m=>{!f||(n(!m||m.type?new Q(null,t,f):m),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));let h=ke(p);if(h&&D.protocols.indexOf(h)===-1){n(new x("Unsupported protocol "+h+":",x.ERR_BAD_REQUEST,t));return}f.send(o||null)})};var Vn={http:fl,xhr:ml};d.forEach(Vn,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(r){}Object.defineProperty(t,"adapterName",{value:e})}});var gl=t=>`- ${t}`,_p=t=>d.isFunction(t)||t===null||t===!1,Cr={getAdapter:t=>{t=d.isArray(t)?t:[t];let{length:e}=t,r,n,o={};for(let i=0;i<e;i++){r=t[i];let s;if(n=r,!_p(r)&&(n=Vn[(s=String(r)).toLowerCase()],n===void 0))throw new x(`Unknown adapter '${s}'`);if(n)break;o[s||"#"+i]=n}if(!n){let i=Object.entries(o).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build")),s=e?i.length>1?`since :
`+i.map(gl).join(`
`):" "+gl(i[0]):"as no adapter specified";throw new x("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:Vn};"use strict";function Gn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Q(null,t)}function kr(t){return Gn(t),t.headers=j.from(t.headers),t.data=ve.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Cr.getAdapter(t.adapter||Xt.adapter)(t).then(function(n){return Gn(t),n.data=ve.call(t,t.transformResponse,n),n.headers=j.from(n.headers),n},function(n){return Ee(n)||(Gn(t),n&&n.response&&(n.response.data=ve.call(t,t.transformResponse,n.response),n.response.headers=j.from(n.response.headers))),Promise.reject(n)})}"use strict";var yl=t=>t instanceof j?t.toJSON():t;function ct(t,e){e=e||{};let r={};function n(l,u,f){return d.isPlainObject(l)&&d.isPlainObject(u)?d.merge.call({caseless:f},l,u):d.isPlainObject(u)?d.merge({},u):d.isArray(u)?u.slice():u}function o(l,u,f){if(d.isUndefined(u)){if(!d.isUndefined(l))return n(void 0,l,f)}else return n(l,u,f)}function i(l,u){if(!d.isUndefined(u))return n(void 0,u)}function s(l,u){if(d.isUndefined(u)){if(!d.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function a(l,u,f){if(f in e)return n(l,u);if(f in t)return n(void 0,l)}let c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(l,u)=>o(yl(l),yl(u),!0)};return d.forEach(Object.keys(Object.assign({},t,e)),function(u){let f=c[u]||o,p=f(t[u],e[u],u);d.isUndefined(p)&&f!==a||(r[u]=p)}),r}"use strict";var Wn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Wn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var xl={};Wn.transitional=function(e,r,n){function o(i,s){return"[Axios v"+Ft+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return(i,s,a)=>{if(e===!1)throw new x(o(s," has been removed"+(r?" in "+r:"")),x.ERR_DEPRECATED);return r&&!xl[s]&&(xl[s]=!0,console.warn(o(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,s,a):!0}};function Sp(t,e,r){if(typeof t!="object")throw new x("options must be an object",x.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),o=n.length;for(;o-- >0;){let i=n[o],s=e[i];if(s){let a=t[i],c=a===void 0||s(a,i,t);if(c!==!0)throw new x("option "+i+" must be "+c,x.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new x("Unknown option "+i,x.ERR_BAD_OPTION)}}var Rr={assertOptions:Sp,validators:Wn};"use strict";var bt=Rr.validators,Me=class{constructor(e){this.defaults=e,this.interceptors={request:new Tn,response:new Tn}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;let i=o.stack?o.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ct(this.defaults,r);let{transitional:n,paramsSerializer:o,headers:i}=r;n!==void 0&&Rr.assertOptions(n,{silentJSONParsing:bt.transitional(bt.boolean),forcedJSONParsing:bt.transitional(bt.boolean),clarifyTimeoutError:bt.transitional(bt.boolean)},!1),o!=null&&(d.isFunction(o)?r.paramsSerializer={serialize:o}:Rr.assertOptions(o,{encode:bt.function,serialize:bt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s=i&&d.merge(i.common,i[r.method]);i&&d.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),r.headers=j.concat(s,i);let a=[],c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});let l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,f=0,p;if(!c){let h=[kr.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,l),p=h.length,u=Promise.resolve(r);f<p;)u=u.then(h[f++],h[f++]);return u}p=a.length;let y=r;for(f=0;f<p;){let h=a[f++],m=a[f++];try{y=h(y)}catch(g){m.call(this,g);break}}try{u=kr.call(this,y)}catch(h){return Promise.reject(h)}for(f=0,p=l.length;f<p;)u=u.then(l[f++],l[f++]);return u}getUri(e){e=ct(this.defaults,e);let r=Pt(e.baseURL,e.url);return Nt(r,e.params,e.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(e){Me.prototype[e]=function(r,n){return this.request(ct(n||{},{method:e,url:r,data:(n||{}).data}))}});d.forEach(["post","put","patch"],function(e){function r(n){return function(i,s,a){return this.request(ct(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}Me.prototype[e]=r(),Me.prototype[e+"Form"]=r(!0)});var Ne=Me;"use strict";var Mr=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});let n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i,s=new Promise(a=>{n.subscribe(a),i=a}).then(o);return s.cancel=function(){n.unsubscribe(i)},s},e(function(i,s,a){n.reason||(n.reason=new Q(i,s,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Mr(function(o){e=o}),cancel:e}}},wl=Mr;"use strict";function Xn(t){return function(r){return t.apply(null,r)}}"use strict";function Yn(t){return d.isObject(t)&&t.isAxiosError===!0}var Jn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jn).forEach(([t,e])=>{Jn[e]=t});var bl=Jn;"use strict";function vl(t){let e=new Ne(t),r=ge(Ne.prototype.request,e);return d.extend(r,Ne.prototype,e,{allOwnKeys:!0}),d.extend(r,e,null,{allOwnKeys:!0}),r.create=function(o){return vl(ct(t,o))},r}var N=vl(Xt);N.Axios=Ne;N.CanceledError=Q;N.CancelToken=wl;N.isCancel=Ee;N.VERSION=Ft;N.toFormData=yt;N.AxiosError=x;N.Cancel=N.CanceledError;N.all=function(e){return Promise.all(e)};N.spread=Xn;N.isAxiosError=Yn;N.mergeConfig=ct;N.AxiosHeaders=j;N.formToJSON=t=>br(d.isHTMLForm(t)?new FormData(t):t);N.getAdapter=Cr.getAdapter;N.HttpStatusCode=bl;N.default=N;var Zn=N;var F=class{constructor(e,r){this.apiKey=e,this.client=Zn.create({baseURL:"https://api.openai.com/v1",headers:{Authorization:`Bearer ${e}`}}),this.settings=r}static getInstance(e,r){return F.instance||(F.instance=new F(e,r)),F.instance}static updateApiKey(e){return this.instance?(this.instance.apiKey=e,this.instance.client.defaults.headers.Authorization=`Bearer ${e}`,this.instance.settings.openAIApiKey=e):this.instance=new F(e,{openAIApiKey:e}),this.instance}updateApiKey(e){this.apiKey=e,this.client.defaults.headers.Authorization=`Bearer ${e}`,this.settings.openAIApiKey=e}async createChatCompletion(e,r,n=.2,o=100){let i=this.settings.openAIApiKey;this.client.defaults.headers.Authorization=`Bearer ${i}`,console.log("Using API Key: ",this.client.defaults.headers.Authorization),console.log(`Using model: ${r}`),console.log(`Max tokens: ${o}`);try{return(await this.client.post("/chat/completions",{model:r,messages:[{role:"user",content:e}],temperature:n,max_tokens:o})).data.choices[0].message.content.trim()}catch(s){throw console.error("Error generating chat completion:",s),new Error("Failed to generate chat completion. Please check your OpenAI API key and try again.")}}async validateApiKeyInternal(){try{return await this.getModels(),!0}catch(e){return console.error("Error validating OpenAI API key:",e),!1}}async getModels(){let e=this.settings.openAIApiKey;this.client.defaults.headers.Authorization=`Bearer ${e}`;try{return(await this.client.get("/models")).data.data.filter(n=>n.id==="gpt-3.5-turbo"||n.id==="gpt-4-turbo-preview").map(n=>({id:n.id,name:n.id}))}catch(r){throw console.error("Error fetching OpenAI models:",r),new Error("Failed to fetch OpenAI models. Please check your OpenAI API key and try again.")}}async getUsage(){let e=this.settings.openAIApiKey;this.client.defaults.headers.Authorization=`Bearer ${e}`;try{return(await this.client.get("/usage")).data}catch(r){throw console.error("Error fetching OpenAI usage:",r),new Error("Failed to fetch OpenAI usage. Please check your OpenAI API key and try again.")}}async generateEmbeddings(e){let r=this.settings.openAIApiKey;this.client.defaults.headers.Authorization=`Bearer ${r}`;try{return(await this.client.post("/embeddings",{input:e,model:"text-embedding-3-large"})).data.data[0].embedding}catch(n){throw console.error("Error generating embeddings:",n),new Error("Failed to generate embeddings. Please check your OpenAI API key and try again.")}}static async validateApiKey(e){if(!this.instance)return console.error("OpenAIService instance not initialized."),!1;try{return(await Zn.get("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${e}`}})).status===200}catch(r){return console.error("Error validating OpenAI API key:",r),!1}}};function _l(t,e){let r;new El.Setting(t).setName("OpenAI API Key").setDesc("Enter your OpenAI API key").addText(n=>{r=n,n.setPlaceholder("API Key").setValue(e.settings.openAIApiKey).onChange(async o=>{e.settings.openAIApiKey=o,await e.saveSettings(),F.updateApiKey(o),await Qn(o,F.getInstance(o,e.settings),r)}),r.inputEl.type="password",r.inputEl.addEventListener("focus",()=>{r.inputEl.type="text"}),r.inputEl.addEventListener("blur",()=>{r.inputEl.type="password"})}).addExtraButton(n=>{n.setIcon("reset"),n.onClick(async()=>{await Qn(e.settings.openAIApiKey,F.getInstance(e.settings.openAIApiKey,e.settings),r)}),n.extraSettingsEl.classList.add("reset-label"),n.extraSettingsEl.textContent="Re-check"}).then(n=>{let o=n.components[0];Qn(e.settings.openAIApiKey,F.getInstance(e.settings.openAIApiKey,e.settings),o)})}async function Qn(t,e,r){let n=r.inputEl.nextElementSibling;n||r.inputEl.insertAdjacentHTML("afterend",'<span class="api-key-status"></span>'),n.textContent="Validating...",n.classList.remove("valid","invalid"),n.classList.add("validating");let o=await Tp(t,e);n.textContent=o?"Valid":"Invalid",n.classList.remove("validating"),n.classList.toggle("valid",o),n.classList.toggle("invalid",!o)}async function Tp(t,e){return await e.validateApiKeyInternal()}var Sl=T(require("obsidian"));var Tl;async function Al(t,e){let r=null;new Sl.Setting(t).setName("Default Model").setDesc("Select the default model for generating tasks").addDropdown(async n=>{r=n;let o=await Ap(e,n,e.settings.defaultOpenAIModelId,F.getInstance(e.settings.openAIApiKey,e.settings));n.onChange(async i=>{e.settings.defaultOpenAIModelId=i,await e.saveSettings(),e.plugin.modelToggleStatusBarItem.setText(`GPT-${e.getCurrentModelShortName()}`)})})}async function Ap(t,e,r,n){let o=e.selectEl;return o&&(o.innerHTML='<option value="">Loading models...</option>'),clearTimeout(Tl),new Promise((i,s)=>{Tl=setTimeout(async()=>{try{let a=await n.getModels();o&&(o.innerHTML="",a.forEach(c=>{let l=document.createElement("option");l.value=c.id,c.id==="gpt-3.5-turbo"?l.text="GPT 3.5 Turbo ($0.001 per 1K tokens)":c.id==="gpt-4-turbo-preview"?l.text="GPT 4 Turbo ($0.02 per 1K tokens)":l.text=c.name,o.appendChild(l)}),e.setValue(r||a[0]?.id||"")),i(a)}catch(a){console.error("Error loading models:",a),o&&(o.innerHTML='<option value="">Failed - check your API key.</option>'),s(a)}},500)})}var Cl=T(require("obsidian"));function kl(t,e){new Cl.Setting(t).setName("Generate Title Prompt").setDesc("The prompt used when generating titles for notes. Use {note} as a placeholder for the note content.").addTextArea(r=>{r.setPlaceholder("Enter generate title prompt").setValue(e.settings.generateTitlePrompt).onChange(async n=>{e.settings.generateTitlePrompt=n,await e.saveSettings()}),r.inputEl.rows=3,r.inputEl.cols=50}).addExtraButton(r=>{r.setIcon("reset").setTooltip("Reset to default generate title prompt").onClick(async()=>{e.settings.generateTitlePrompt=hr.generateTitlePrompt,await e.saveSettings(),e.settingsDisplay(t)})})}var Rl=T(require("obsidian"));function Ml(t,e){new Rl.Setting(t).setName("Max Tokens").setDesc("The maximum number of tokens to generate in the chat completion").addText(r=>r.setPlaceholder("Enter max tokens").setValue(e.settings.maxTokens.toString()).onChange(async n=>{let o=parseInt(n);isNaN(o)||(e.settings.maxTokens=o,await e.saveSettings())}))}var to=class extends Nl.PluginSettingTab{constructor(e,r,n){super(e,r.plugin);this.plugin=r,this.containerEl=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h3",{text:"Brain Settings"}).addClass("ss-h3"),e.createEl("p",{text:"Set the more general settings here, which are used across all modules."}),_l(e,this.plugin),Al(e,this.plugin),e.createDiv("info-box").createEl("p",{text:"Note: GPT-3.5-Turbo is pretty much free; it's fractions of a cent and pretty powerful. I personally spend less than $3 a day from very heavy use of GPT-4-Turbo. Each person is different. I recommend tracking your daily use and seeing what your average is, and then adjust between using GPT-3.5-Turbo and GPT-4-Turbo."}),Ml(e,this.plugin),kl(e,this.plugin);let o=e.createDiv("upcoming-features");o.createEl("h3",{text:"Upcoming Brain Features"}).addClass("ss-h3");let s=o.createEl("ul");s.createEl("li",{text:`"Cost Caution" Toggle: cost estimates before confirming any online model interaction so you know how much you're about to spend`}),s.createEl("li",{text:"Use your own local LLM (LMStudio / Ollama)"}),s.createEl("li",{text:"Use your own local Whisper instance for Recorder transcription"}),s.createEl("li",{text:"Simple / Advanced Settings Modes (further fine-tune your settings; Online Mode, Offline Mode, Mixed Mode, able to be toggled through with the click of a button on the status bar)"}),s.createEl("li",{text:"Toggle entire SystemSculpt AI modules on or off if you're not using them"}),s.createEl("li",{text:"Include Anthropic, Google, and OpenRouter AI APIs in Online Mode"})}};async function Pl(t,e){let r=Cp(e,t.settings.generateTitlePrompt),n=t.settings.defaultOpenAIModelId||"gpt-3.5-turbo";console.log(`Using model: ${n}`);try{let o=await t.openAIService.createChatCompletion(r,n,t.settings.temperature,t.settings.maxTokens);return kp(o)}catch(o){throw console.error("Error generating title:",o),new Error("Failed to generate title. Please check your API key and try again.")}}function Cp(t,e){return e.replace("{note}",t)}function kp(t){return t.replace(/[^\w\-. ]/g,"").replace(/^\.+/,"").trim().replace(/\s+/g," ")}var Dl=T(require("obsidian"));async function jl(t){let e=t.plugin.app.workspace.getActiveViewOfType(Dl.MarkdownView);if(e){let r=e.file,n=await t.plugin.app.vault.read(r),o=new gn(t.plugin.app);o.open();try{let i=await t.generateTitle(n);await Rp(t,r,i)}catch(i){throw console.error("Error generating title:",i),new Error("Failed to generate title. Please check your API key and try again.")}finally{o.close()}}}async function Rp(t,e,r){let n=`${e.parent.path}/${r}.md`;await t.plugin.app.fileManager.renameFile(e,n)}var eo=class{constructor(e,r){this.plugin=e,this.openAIService=r}async load(){await this.loadSettings(),this.plugin.addCommand({id:"generate-note-title",name:"Generate Title for Current Note",callback:async()=>{await this.generateTitleForCurrentNote()}}),this.plugin.modelToggleStatusBarItem||(this.plugin.modelToggleStatusBarItem=this.plugin.addStatusBarItem(),this.plugin.modelToggleStatusBarItem.addClass("model-toggle-button"),this.plugin.modelToggleStatusBarItem.setText(`GPT-${this.getCurrentModelShortName()}`)),this.plugin.modelToggleStatusBarItem.onClickEvent(()=>{this.switchModel(),this.plugin.modelToggleStatusBarItem.setText(`GPT-${this.getCurrentModelShortName()}`)})}async loadSettings(){this.settings=Object.assign({},hr,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings),this.openAIService.updateApiKey(this.settings.openAIApiKey)}settingsDisplay(e){let r=e.createDiv("animation-container");dr(r),new to(this.plugin.app,this,e).display()}async generateTitle(e){return Pl(this,e)}async generateTitleForCurrentNote(){return jl(this)}switchModel(){let e=this.settings.defaultOpenAIModelId==="gpt-3.5-turbo"?"gpt-4-turbo-preview":"gpt-3.5-turbo";this.settings.defaultOpenAIModelId=e,this.saveSettings()}getCurrentModelShortName(){return this.settings.defaultOpenAIModelId==="gpt-3.5-turbo"?"3.5 Turbo":"4 Turbo"}};var Fl=T(require("obsidian")),Mp={},ro=class{constructor(e){this.plugin=e}async load(){await this.loadSettings()}async loadSettings(){this.settings=Object.assign({},Mp,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings)}settingsDisplay(e){new Il(this.plugin.app,this,e).display()}},Il=class extends Fl.PluginSettingTab{constructor(e,r,n){super(e,r.plugin);this.plugin=r,this.containerEl=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h3",{text:"Templates Settings"}).addClass("ss-h3"),e.createEl("p",{text:"Coming soon..."});let n=e.createDiv("upcoming-features");n.createEl("h3",{text:"Upcoming Templates Features"}).addClass("ss-h3");let i=n.createEl("ul");i.createEl("li",{text:"Create complex templates that can perform multiple GPT actions within a single run"}),i.createEl("li",{text:"Use templates on an entire note or a selected portion of it with a single hotkey"}),i.createEl("li",{text:"Complex AI as well as JavaScript actions able to be done through scripting (automations, for example)"})}};var Ll=T(require("obsidian")),Np={},no=class{constructor(e){this.plugin=e}async load(){await this.loadSettings()}async loadSettings(){this.settings=Object.assign({},Np,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings)}settingsDisplay(e){new Ol(this.plugin.app,this,e).display()}},Ol=class extends Ll.PluginSettingTab{constructor(e,r,n){super(e,r.plugin);this.plugin=r,this.containerEl=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h3",{text:"Data Settings"}).addClass("ss-h3"),e.createEl("p",{text:"Coming soon..."});let n=e.createDiv("upcoming-features");n.createEl("h3",{text:"Upcoming Data Features"}).addClass("ss-h3");let i=n.createEl("ul");i.createEl("li",{text:"A SystemSculpt Chrome extension to streamline the syncing of articles, tweets, youtube videos, and much more"}),i.createEl("li",{text:"Omnivore / Readwise / Reader API integrations"}),i.createEl("li",{text:"Have a cool data source that has an API that I can connect the SystemSculpt data route to? Message me on X or email!"})}};var Nr={whisperModel:"whisper-1",recordingsPath:"SystemSculpt/Recordings",selectedMicrophone:"default",autoTranscriptionEnabled:!0,saveAudioClips:!0,pasteIntoActiveNote:!0,copyToClipboard:!0};var ac=T(require("obsidian"));var Jl=T(require("obsidian"));var Bl=T(require("obsidian"));function Hl(t,e){new Bl.Setting(t).setName("Recordings Path").setDesc("Path where the recordings will be stored").addText(r=>{r.setPlaceholder("Enter path").setValue(e.settings.recordingsPath).onChange(async n=>{e.settings.recordingsPath=n,await e.saveSettings()})}).addExtraButton(r=>{r.setIcon("reset").setTooltip("Reset to default path").onClick(async()=>{e.settings.recordingsPath=Nr.recordingsPath,await e.saveSettings(),e.settingsDisplay(t)})})}var Ul=T(require("obsidian"));function zl(t,e){new Ul.Setting(t).setName("Microphone").setDesc("Select the microphone for recording").addDropdown(async r=>{(await e.getMicrophones()).forEach(o=>{r.addOption(o.deviceId,o.label)}),r.setValue(e.settings.selectedMicrophone),r.onChange(async o=>{e.settings.selectedMicrophone=o,await e.saveSettings()})})}var ql=T(require("obsidian"));function $l(t,e){new ql.Setting(t).setName("Auto-Transcription").setDesc("Automatically transcribe recordings").addToggle(r=>{r.setValue(e.settings.autoTranscriptionEnabled).onChange(async n=>{e.settings.autoTranscriptionEnabled=n,await e.saveSettings()})})}var Kl=T(require("obsidian"));function Vl(t,e){new Kl.Setting(t).setName("Save Audio Clips").setDesc("Save audio clips after transcription").addToggle(r=>{r.setValue(e.settings.saveAudioClips).onChange(async n=>{e.settings.saveAudioClips=n,await e.saveSettings()})})}var Gl=T(require("obsidian"));function Wl(t,e){new Gl.Setting(t).setName("Paste into Active Note").setDesc("Automatically paste the transcription into the active note at the cursor position").addToggle(r=>{r.setValue(e.settings.pasteIntoActiveNote).onChange(async n=>{e.settings.pasteIntoActiveNote=n,await e.saveSettings()})})}var Xl=T(require("obsidian"));function Yl(t,e){new Xl.Setting(t).setName("Copy to Clipboard").setDesc("Automatically copy the transcription to the clipboard").addToggle(r=>{r.setValue(e.settings.copyToClipboard).onChange(async n=>{e.settings.copyToClipboard=n,await e.saveSettings()})})}var oo=class extends Jl.PluginSettingTab{constructor(e,r,n){super(e,r.plugin);this.plugin=r,this.containerEl=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h3",{text:"Recorder Settings"}).addClass("ss-h3"),e.createEl("p",{text:"Set defaults for the recorder, such as the microphone to use, whether or not to automatically transcribe recordings, and more."}),e.createDiv("info-box").createEl("p",{text:"Please ensure that you have set your OpenAI API key in the Brain settings."}),Hl(e,this.plugin),zl(e,this.plugin),$l(e,this.plugin),Vl(e,this.plugin),Wl(e,this.plugin),Yl(e,this.plugin);let o=e.createDiv("upcoming-features");o.createEl("h3",{text:"Upcoming Recorder Features"}).addClass("ss-h3");let s=o.createEl("ul");s.createEl("li",{text:"100% local, offline Whisper AI transcription integration"}),s.createEl("li",{text:"Save transcriptions, each to a separate file within a folder or all within a single designated note"}),s.createEl("li",{text:"Custom words, phrases; things that Whisper usually gets wrong, you can provide Whisper with the correct spelling within this Custom Words box that it will reference and fix before giving you the final transcription"})}};async function Zl(){try{return(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.kind==="audioinput")}catch(t){return console.error("Error getting microphones:",t),[]}}async function Ql(t){let r=(await t.getMicrophones()).find(n=>n.deviceId===t.settings.selectedMicrophone||"default");return r||(console.warn("Selected microphone not found, using default"),t.settings.selectedMicrophone="default",await t.saveSettings()),r}var io=class{constructor(e,r){this.isDragging=!1;this.dragOffset={x:0,y:0};this.app=e,this.plugin=r,this.noticeEl=this.createNoticeEl(),this.addDragEventListeners()}createNoticeEl(){let e=document.createElement("div");e.addClass("recording-notice"),e.createDiv("recording-notice-header").createEl("h3",{text:"Recording audio..."});let o=e.createDiv("recording-notice-canvas").createEl("canvas");return o.width=250,o.height=50,this.canvasContext=o.getContext("2d"),e}addDragEventListeners(){this.noticeEl.addEventListener("mousedown",this.startDragging.bind(this)),window.addEventListener("mousemove",this.drag.bind(this)),window.addEventListener("mouseup",this.stopDragging.bind(this))}startDragging(e){this.isDragging=!0,this.dragOffset.x=e.clientX-this.noticeEl.offsetLeft,this.dragOffset.y=e.clientY-this.noticeEl.offsetTop}drag(e){if(!this.isDragging)return;let r=e.clientX-this.dragOffset.x,n=e.clientY-this.dragOffset.y;this.noticeEl.style.left=`${r}px`,this.noticeEl.style.top=`${n}px`,this.noticeEl.style.bottom="auto",this.noticeEl.style.right="auto"}stopDragging(){this.isDragging=!1}show(){return new Promise((e,r)=>{let n=document.body.querySelector(".notice-container");n||(n=document.createElement("div"),n.className="notice-container",document.body.appendChild(n)),n?(n.appendChild(this.noticeEl),this.noticeEl.style.position="fixed",this.noticeEl.style.bottom="20px",this.noticeEl.style.right="20px",this.startRecording().then(e).catch(r)):r(new Error("Notice container not found"))})}async startRecording(){try{let e=await this.plugin.getSelectedMicrophone(),r=await navigator.mediaDevices.getUserMedia({audio:{deviceId:e?e.deviceId:"default"}});this.audioContext=new AudioContext,this.audioSource=this.audioContext.createMediaStreamSource(r),this.analyser=this.audioContext.createAnalyser(),this.audioSource.connect(this.analyser),this.mediaRecorder=new MediaRecorder(r),this.mediaRecorder.start(),this.visualize()}catch(e){throw console.error("Error starting recording:",e),e}}visualize(){if(!this.analyser){console.error("Analyser not initialized");return}let e=this.analyser.frequencyBinCount,r=new Uint8Array(e),n=()=>{this.rafId=requestAnimationFrame(n),this.analyser.getByteTimeDomainData(r),this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.canvasContext.lineWidth=2,this.canvasContext.strokeStyle="white",this.canvasContext.beginPath();let o=this.canvasContext.canvas.width*1/e,i=0;for(let s=0;s<e;s++){let c=r[s]/128*this.canvasContext.canvas.height/2*1.5;s===0?this.canvasContext.moveTo(i,this.canvasContext.canvas.height/2):this.canvasContext.lineTo(i,this.canvasContext.canvas.height/1-c),i+=o}this.canvasContext.lineTo(this.canvasContext.canvas.width,this.canvasContext.canvas.height/2),this.canvasContext.stroke()};n()}async stopRecording(){return cancelAnimationFrame(this.rafId),this.audioSource.disconnect(),this.audioContext.close(),this.mediaRecorder.stream&&this.mediaRecorder.stream.getTracks().forEach(e=>e.stop()),new Promise((e,r)=>{this.mediaRecorder.addEventListener("dataavailable",async n=>{try{let o=await n.data.arrayBuffer();e(o)}catch(o){r(o)}}),this.mediaRecorder.stop()})}hide(){this.noticeEl.parentNode&&this.noticeEl.parentNode.removeChild(this.noticeEl)}};async function tc(t){t.recordingNotice||(t.recordingNotice=new io(t.plugin.app,t),t.recordingNotice.show().catch(e=>{t.handleError(e,"Error starting recording"),t.recordingNotice=null}))}async function ec(t){if(t.recordingNotice){let e=await t.recordingNotice.stopRecording().catch(r=>{t.handleError(r,"Error stopping recording")});t.recordingNotice.hide(),t.recordingNotice=null,e&&await t.saveRecording(e)&&t.settings.autoTranscriptionEnabled&&await t.handleTranscription(e)}else console.warn("No recording is in progress.")}var rc=T(require("obsidian"));async function nc(t,e){let{vault:r}=t.plugin.app,{recordingsPath:n}=t.settings,o=new Date,s=`recording-${`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}-${String(o.getHours()).padStart(2,"0")}-${String(o.getMinutes()).padStart(2,"0")}`}.mp3`,a=(0,rc.normalizePath)(`${n}/${s}`),c=await r.createBinary(a,e);if(!t.settings.saveAudioClips){let l=t.plugin.app.vault.getAbstractFileByPath(a);return l&&await t.plugin.app.vault.delete(l),null}return c}async function oc(t,e){let r=new Blob([e],{type:"audio/mpeg"}),n=new FormData;n.append("file",r),n.append("model",t.settings.whisperModel),console.log(`Using model: ${t.settings.whisperModel}`);let o=t.plugin.brainModule.settings.openAIApiKey,i=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${o}`},body:n,mode:"cors"});if(!i.ok)throw console.error("Failed to transcribe recording:",await i.text()),new Error("Transcription failed");return(await i.json()).text}async function ic(t,e){if(!await F.validateApiKey(t.plugin.settings.openAIApiKey)){$("Invalid OpenAI API Key. Please check your Brain settings -> OpenAI API Key.");return}let n=$("Transcribing...");try{let o=await oc(t,e);xn(n),t.settings.copyToClipboard&&navigator.clipboard.writeText(o);let i=t.plugin.app.workspace.activeLeaf;if(i&&i.view.getViewType()==="markdown"&&t.settings.pasteIntoActiveNote){let a=i.view.editor;if(a){a.replaceSelection(o),$("Transcribed and pasted into your note at the cursor position!");return}}t.settings.copyToClipboard?$("Transcribed and copied to your clipboard!"):$("Transcription completed!")}catch(o){t.handleError(o,"Error generating transcription"),xn(n)}}async function sc(t,e){if(e.extension!=="mp3"){console.error("Selected file is not an .mp3 file");return}let r=await t.readFileAsArrayBuffer(e);await t.handleTranscription(r)}var so=class{constructor(e,r){this.recordingNotice=null;this.plugin=e,this.openAIService=r}async load(){await this.loadSettings(),this.plugin.addCommand({id:"record-audio-note",name:"Record Audio Note",callback:()=>this.toggleRecording(),hotkeys:[]}),this.plugin.addCommand({id:"transcribe-selected-file",name:"Transcribe Selected File",callback:()=>{}})}async loadSettings(){this.settings=Object.assign({},Nr,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings)}settingsDisplay(e){new oo(this.plugin.app,this,e).display()}async ensureRecordingsDirectory(){let{vault:e}=this.plugin.app,{recordingsPath:r}=this.settings,n=(0,ac.normalizePath)(r);if(!e.getAbstractFileByPath(n))try{await e.createFolder(n),this.plugin.app.workspace.trigger("refresh-files")}catch(i){i.message.includes("Folder already exists")?console.log("The recordings directory already exists. No action needed."):console.error("Error ensuring recordings directory:",i)}}async getMicrophones(){return Zl()}async getSelectedMicrophone(){return Ql(this)}async toggleRecording(){this.recordingNotice?await this.stopRecording():await this.startRecording()}async startRecording(){await this.ensureRecordingsDirectory(),await tc(this)}async stopRecording(){await ec(this)}async saveRecording(e){return nc(this,e)}async handleTranscription(e){return ic(this,e)}handleError(e,r){console.error(r,e),$(`${r}. Please try again.`)}async transcribeSelectedFile(e){return sc(this,e)}async readFileAsArrayBuffer(e){return await this.plugin.app.vault.readBinary(e)}};var lc=T(require("obsidian"));var Pr={buyMeACoffee:[{name:"Ronny Khalil",coffees:1}],patreonMembers:[{name:"Francisco Lopez"},{name:"Ellie VanBerkel"},{name:"Robby Badruddin"},{name:"Grayerbeard"},{name:"Jose"},{name:"EVALDO JESUS"},{name:"Nate Dude"},{name:"Jochen"},{name:"J Trent"},{name:"Jiri Rose"},{name:"Pavel Eliminiro"},{name:"Sashi"},{name:"Darren Taylor"},{name:"C.A. Hall"},{name:"Richard Bennett"},{name:"James Traver"},{name:"Alex Yao"},{name:"x lotusinthemud x"},{name:"Stefan Wagner"},{name:"BuzzSenior"},{name:"Jeff Kiefer"}],youtubeMembers:[{name:"Sebastian Kost"}]};var ao=class{constructor(e){this.plugin=e}async load(){}settingsDisplay(e){new cc(this.plugin.app,this,e).display()}},cc=class extends lc.PluginSettingTab{constructor(e,r,n){super(e,r.plugin);this.plugin=r,this.containerEl=n}display(){let{containerEl:e}=this;e.empty();let r=e.createDiv("about-content-container");this.renderGeneral(r),this.renderHallOfFame(r)}renderGeneral(e){let r=e.createDiv("about-content"),n=r.createDiv("about-description");n.createEl("h3",{text:"It's just me :D"}).addClass("ss-h3"),n.createEl("p",{text:"By sponsoring or donating, you allow me to put more time into this and other Obsidian tools to benefit your productivity."});let i=r.createDiv("about-support"),s=i.createEl("a",{href:"https://www.patreon.com/SystemSculpt",cls:"support-link"});s.createSpan({cls:"icon",text:"P"}),s.createSpan({text:"Become a Patron"});let a=i.createEl("a",{href:"https://www.buymeacoffee.com/SystemSculpt",cls:"support-link"});a.createSpan({cls:"icon",text:"C"}),a.createSpan({text:"Buy Me a Coffee"});let c=r.createDiv("about-social"),l=[{name:"YouTube",url:"https://www.youtube.com/systemsculpt",icon:"Y"},{name:"X (Twitter)",url:"https://x.com/systemsculpt",icon:"X"},{name:"GitHub",url:"https://github.com/systemsculpt",icon:"G"}],u=c.createEl("ul",{cls:"social-list"});l.forEach(p=>{let h=u.createEl("li").createEl("a",{href:p.url,cls:"social-link"});h.createSpan({cls:"icon",text:p.icon}),h.createSpan({text:p.name})});let f=e.createDiv("about-contact");f.createEl("p",{text:"For any inquiries, suggestions, or feedback, please reach out via email:"}),f.createEl("a",{href:"mailto:systemsculpt@gmail.com",cls:"contact-link",text:"systemsculpt@gmail.com"})}async renderHallOfFame(e){let r=e.createDiv("about-hall-of-fame");this.renderMembershipSection(r,"Bought Me a Coffee",Pr.buyMeACoffee,"bmac-section","bmac-yellow","Buy Me Some Coffee!","https://www.buymeacoffee.com/SystemSculpt"),this.renderMembershipSection(r,"Patreon Supporters",Pr.patreonMembers,"patreon-section","patreon-blue","Become a Patron","https://www.patreon.com/SystemSculpt"),this.renderMembershipSection(r,"YouTube Members",Pr.youtubeMembers,"youtube-section","youtube-red","Become a YouTube Member","https://www.youtube.com/channel/your-channel-id/join")}renderMembershipSection(e,r,n,o,i,s,a){let c=e.createDiv(o),l=c.createEl("h3",{text:r});l.addClass(i),l.addClass("ss-h3"),c.createEl("a",{text:s,href:a,cls:"section-link"}).addClass(i);let f=c.createEl("ul",{cls:"supporter-list"}),p=3;for(let y=0;y<n.length;y+=p){let h=n.slice(y,y+p),m=f.createEl("li",{cls:"supporter-row"});h.forEach(g=>{let w=m.createEl("div",{cls:"supporter-item"});w.createSpan({text:g.name}),g.coffees&&w.createSpan({cls:"supporter-contribution",text:`${g.coffees} coffee${g.coffees>1?"s":""}`})})}}};var lo=class extends Dr.Plugin{constructor(){super(...arguments);this.modelToggleStatusBarItem=null}async onload(){await this.loadSettings(),this.brainModule=this.initializeBrainModule(),await this.brainModule.load(),this.tasksModule=this.initializeTasksModule(this.brainModule),this.tasksModule.load(),this.templatesModule=new ro(this),this.templatesModule.load(),this.dataModule=new no(this),this.dataModule.load();let e=F.getInstance(this.settings.openAIApiKey,this.settings);this.recorderModule=new so(this,e),this.recorderModule.load(),this.aboutModule=new ao(this),this.aboutModule.load(),this.addSettingTab(new hn(this.app,this)),this.registerEvent(this.app.workspace.on("file-menu",(r,n)=>{n instanceof Dr.TFile&&n.extension==="mp3"&&r.addItem(o=>{o.setTitle("SystemSculpt - Transcribe").setIcon("microphone").onClick(async()=>{await this.recorderModule.transcribeSelectedFile(n)})})}))}initializeBrainModule(){let e=F.getInstance(this.settings.openAIApiKey,this.settings);return new eo(this,e)}initializeTasksModule(e){return new bn(this,e)}async loadSettings(){this.settings=Object.assign({},qs,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},Pp=lo;
